{"ast":null,"code":"import React,{useEffect,useState}from'react';import{realtimeDb}from'./firebase';import{ref,onValue}from'firebase/database';import styles from'./Leaderboard.module.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MultiplayerLeaderboard(){const[leaderboard,setLeaderboard]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const statsRef=ref(realtimeDb,'userStats');const unsubscribe=onValue(statsRef,snapshot=>{const data=snapshot.val();if(data){const entries=Object.entries(data).map(_ref=>{let[userId,stats]=_ref;const gamesPlayed=stats.multiplayerGamesPlayed||0;const wins=stats.multiplayerWins||0;const winRate=gamesPlayed>0?Math.round(wins/gamesPlayed*100):0;return{userId,displayName:stats.displayName||\"Player \".concat(userId.slice(0,8)),points:stats.multiplayerPoints||0,wins:wins,gamesPlayed:gamesPlayed,winRate:winRate};}).filter(entry=>entry.gamesPlayed>0)// Only show players who have played\n.sort((a,b)=>b.points-a.points).slice(0,10);setLeaderboard(entries);}else{setLeaderboard([]);}setLoading(false);});return()=>unsubscribe();},[]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:styles.leaderboardCard,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.leaderboardTitle,children:\"\\uD83C\\uDFC6 Multiplayer Leaderboard\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.noScores,children:\"Loading...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.leaderboardCard,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.leaderboardTitle,children:\"\\uD83C\\uDFC6 Multiplayer Leaderboard\"}),leaderboard.length===0?/*#__PURE__*/_jsx(\"div\",{className:styles.noScores,children:\"No multiplayer games played yet\"}):/*#__PURE__*/_jsx(\"div\",{className:styles.scoresList,children:leaderboard.map((entry,index)=>/*#__PURE__*/_jsxs(\"div\",{className:styles.scoreItem,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.rank,children:[\"#\",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.playerInfo,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.playerName,children:entry.displayName}),/*#__PURE__*/_jsxs(\"div\",{className:styles.playerStats,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.statBadge,children:[\"\\uD83C\\uDFC6 \",entry.wins,\"W/\",entry.gamesPlayed,\"G\"]}),/*#__PURE__*/_jsxs(\"span\",{className:styles.statBadge,children:[\"\\uD83D\\uDCCA \",entry.winRate,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:styles.score,children:[entry.points,\" pts\"]})]},entry.userId))})]});}export default MultiplayerLeaderboard;","map":{"version":3,"names":["React","useEffect","useState","realtimeDb","ref","onValue","styles","jsx","_jsx","jsxs","_jsxs","MultiplayerLeaderboard","leaderboard","setLeaderboard","loading","setLoading","statsRef","unsubscribe","snapshot","data","val","entries","Object","map","_ref","userId","stats","gamesPlayed","multiplayerGamesPlayed","wins","multiplayerWins","winRate","Math","round","displayName","concat","slice","points","multiplayerPoints","filter","entry","sort","a","b","className","leaderboardCard","children","leaderboardTitle","noScores","length","scoresList","index","scoreItem","rank","playerInfo","playerName","playerStats","statBadge","score"],"sources":["C:/Users/MARCE/source/repos/CrazyPuzzle/web/src/MultiplayerLeaderboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { realtimeDb } from './firebase';\r\nimport { ref, onValue } from 'firebase/database';\r\nimport styles from './Leaderboard.module.scss';\r\n\r\ninterface LeaderboardEntry {\r\n  userId: string;\r\n  displayName: string;\r\n  points: number;\r\n  wins: number;\r\n  gamesPlayed: number;\r\n  winRate: number;\r\n}\r\n\r\nfunction MultiplayerLeaderboard() {\r\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const statsRef = ref(realtimeDb, 'userStats');\r\n    \r\n    const unsubscribe = onValue(statsRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const entries: LeaderboardEntry[] = Object.entries(data)\r\n          .map(([userId, stats]: [string, any]) => {\r\n            const gamesPlayed = stats.multiplayerGamesPlayed || 0;\r\n            const wins = stats.multiplayerWins || 0;\r\n            const winRate = gamesPlayed > 0 ? Math.round((wins / gamesPlayed) * 100) : 0;\r\n            \r\n            return {\r\n              userId,\r\n              displayName: stats.displayName || `Player ${userId.slice(0, 8)}`,\r\n              points: stats.multiplayerPoints || 0,\r\n              wins: wins,\r\n              gamesPlayed: gamesPlayed,\r\n              winRate: winRate\r\n            };\r\n          })\r\n          .filter(entry => entry.gamesPlayed > 0) // Only show players who have played\r\n          .sort((a, b) => b.points - a.points)\r\n          .slice(0, 10);\r\n        setLeaderboard(entries);\r\n      } else {\r\n        setLeaderboard([]);\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={styles.leaderboardCard}>\r\n        <h3 className={styles.leaderboardTitle}>üèÜ Multiplayer Leaderboard</h3>\r\n        <div className={styles.noScores}>Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.leaderboardCard}>\r\n      <h3 className={styles.leaderboardTitle}>üèÜ Multiplayer Leaderboard</h3>\r\n      {leaderboard.length === 0 ? (\r\n        <div className={styles.noScores}>No multiplayer games played yet</div>\r\n      ) : (\r\n        <div className={styles.scoresList}>\r\n          {leaderboard.map((entry, index) => (\r\n            <div key={entry.userId} className={styles.scoreItem}>\r\n              <span className={styles.rank}>#{index + 1}</span>\r\n              <div className={styles.playerInfo}>\r\n                <span className={styles.playerName}>{entry.displayName}</span>\r\n                <div className={styles.playerStats}>\r\n                  <span className={styles.statBadge}>\r\n                    üèÜ {entry.wins}W/{entry.gamesPlayed}G\r\n                  </span>\r\n                  <span className={styles.statBadge}>\r\n                    üìä {entry.winRate}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <span className={styles.score}>{entry.points} pts</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MultiplayerLeaderboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}