{"ast":null,"code":"import React,{useState,useEffect,useCallback,useMemo}from'react';import'./PuzzleBoard.scss';// Add this props interface\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Use the typed props here\nfunction PuzzleBoard(_ref){var _gridSizes;let{difficulty,layout,user,onScore,onComplete}=_ref;const gridSizes={easy:4,medium:6,hard:8};const gridSize=(_gridSizes=gridSizes[difficulty])!==null&&_gridSizes!==void 0?_gridSizes:4;const animalImages=useMemo(()=>['https://cdn-icons-png.flaticon.com/512/616/616408.png','https://cdn-icons-png.flaticon.com/512/616/616430.png','https://cdn-icons-png.flaticon.com/512/616/616415.png','https://cdn-icons-png.flaticon.com/512/616/616426.png','https://cdn-icons-png.flaticon.com/512/616/616418.png','https://cdn-icons-png.flaticon.com/512/616/616420.png','https://cdn-icons-png.flaticon.com/512/616/616424.png','https://cdn-icons-png.flaticon.com/512/616/616422.png'],[]);const generateTiles=useCallback(()=>{const totalTiles=gridSize*gridSize;let values=[];if(difficulty==='easy'){let pairsNeeded=totalTiles/2;let selectedImages=[];for(let i=0;i<pairsNeeded;i++){selectedImages.push(animalImages[i%animalImages.length]);}selectedImages.forEach(img=>{return values.push(img,img);});}else{for(let i=1;i<=totalTiles/2;i++){values.push(i,i);}}for(let i=values.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[values[i],values[j]]=[values[j],values[i]];}return values;},[difficulty,gridSize,animalImages]);const[tiles,setTiles]=useState([]);const[flipped,setFlipped]=useState([]);const[matched,setMatched]=useState([]);const[score,setScore]=useState(0);const[timer,setTimer]=useState(0);const[isActive,setIsActive]=useState(false);useEffect(()=>{setTiles(generateTiles());setFlipped([]);setMatched([]);setScore(0);setTimer(0);setIsActive(true);},[difficulty,layout,generateTiles]);useEffect(()=>{let interval=null;if(isActive&&matched.length<tiles.length){interval=setInterval(()=>{setTimer(t=>t+1);},1000);}else if(!isActive||matched.length===tiles.length){if(interval)clearInterval(interval);}return()=>{if(interval)clearInterval(interval);};},[isActive,matched,tiles.length]);useEffect(()=>{if(matched.length===tiles.length&&matched.length>0&&user){if(onScore)onScore(score,timer);if(onComplete)onComplete();}},[matched,tiles.length,score,timer,user,onScore,onComplete]);const handleTileClick=idx=>{if(flipped.length===2||flipped.includes(idx)||matched.includes(idx))return;const newFlipped=[...flipped,idx];setFlipped(newFlipped);if(newFlipped.length===2){const[first,second]=newFlipped;if(tiles[first]===tiles[second]){setTimeout(()=>{setMatched([...matched,first,second]);setFlipped([]);setScore(s=>s+10);},700);}else{setTimeout(()=>setFlipped([]),700);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"board-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"board-title\",children:\"Crazy Puzzle Board\"}),layout==='grid'?/*#__PURE__*/_jsx(\"div\",{className:\"puzzle-grid\",style:{['--grid-size']:gridSize},children:tiles.map((val,idx)=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleTileClick(idx),className:\"tile\".concat(flipped.includes(idx)||matched.includes(idx)?' flipped':''),children:matched.includes(idx)||flipped.includes(idx)?difficulty==='easy'?/*#__PURE__*/_jsx(\"img\",{src:typeof val==='string'?val:'',alt:\"animal\",className:\"tile-img\"}):val:'?'},idx))}):/*#__PURE__*/_jsx(\"p\",{children:\"Other layouts coming soon!\"}),matched.length===tiles.length&&/*#__PURE__*/_jsxs(\"div\",{className:\"congrats-msg\",children:[\"\\uD83C\\uDF89 Congratulations! You completed the puzzle.\",/*#__PURE__*/_jsx(\"br\",{}),\"Final Score: \",score,\" | Time: \",timer,\"s\"]})]});}export default PuzzleBoard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","jsx","_jsx","jsxs","_jsxs","PuzzleBoard","_ref","_gridSizes","difficulty","layout","user","onScore","onComplete","gridSizes","easy","medium","hard","gridSize","animalImages","generateTiles","totalTiles","values","pairsNeeded","selectedImages","i","push","length","forEach","img","j","Math","floor","random","tiles","setTiles","flipped","setFlipped","matched","setMatched","score","setScore","timer","setTimer","isActive","setIsActive","interval","setInterval","t","clearInterval","handleTileClick","idx","includes","newFlipped","first","second","setTimeout","s","className","children","style","map","val","onClick","concat","src","alt"],"sources":["C:/Users/MARCE/source/repos/CrazyPuzzle/web/src/PuzzleBoard.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport type { User } from 'firebase/auth';\r\nimport './PuzzleBoard.scss';\r\n\r\n// Add this props interface\r\ninterface PuzzleBoardProps {\r\n  difficulty: 'easy' | 'medium' | 'hard' | string;\r\n  layout: string;\r\n  user?: User | null;\r\n  onScore?: (score: number, timer: number) => void;\r\n  onComplete?: () => void;\r\n}\r\n\r\n// Use the typed props here\r\nfunction PuzzleBoard({ difficulty, layout, user, onScore, onComplete }: PuzzleBoardProps) {\r\n  const gridSizes: Record<'easy' | 'medium' | 'hard', number> = { easy: 4, medium: 6, hard: 8 };\r\n  const gridSize = gridSizes[difficulty as 'easy' | 'medium' | 'hard'] ?? 4;\r\n\r\n  const animalImages = useMemo(() => [\r\n    'https://cdn-icons-png.flaticon.com/512/616/616408.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616430.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616415.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616426.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616418.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616420.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616424.png',\r\n    'https://cdn-icons-png.flaticon.com/512/616/616422.png',\r\n  ], []);\r\n\r\n  const generateTiles = useCallback(() => {\r\n    const totalTiles = gridSize * gridSize;\r\n    let values: (string | number)[] = [];\r\n    if (difficulty === 'easy') {\r\n      let pairsNeeded = totalTiles / 2;\r\n      let selectedImages: string[] = [];\r\n      for (let i = 0; i < pairsNeeded; i++) {\r\n        selectedImages.push(animalImages[i % animalImages.length]);\r\n      }\r\n      selectedImages.forEach(img => {\r\n        return values.push(img, img);\r\n      });\r\n    } else {\r\n      for (let i = 1; i <= totalTiles / 2; i++) {\r\n        values.push(i, i);\r\n      }\r\n    }\r\n    for (let i = values.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [values[i], values[j]] = [values[j], values[i]];\r\n    }\r\n    return values;\r\n  }, [difficulty, gridSize, animalImages]);\r\n\r\n  const [tiles, setTiles] = useState<(string | number)[]>([]);\r\n  const [flipped, setFlipped] = useState<number[]>([]);\r\n  const [matched, setMatched] = useState<number[]>([]);\r\n  const [score, setScore] = useState(0);\r\n  const [timer, setTimer] = useState(0);\r\n  const [isActive, setIsActive] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setTiles(generateTiles());\r\n    setFlipped([]);\r\n    setMatched([]);\r\n    setScore(0);\r\n    setTimer(0);\r\n    setIsActive(true);\r\n  }, [difficulty, layout, generateTiles]);\r\n\r\n  useEffect(() => {\r\n    let interval: ReturnType<typeof setInterval> | null = null;\r\n    if (isActive && matched.length < tiles.length) {\r\n      interval = setInterval(() => {\r\n        setTimer(t => t + 1);\r\n      }, 1000);\r\n    } else if (!isActive || matched.length === tiles.length) {\r\n      if (interval) clearInterval(interval);\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, [isActive, matched, tiles.length]);\r\n\r\n  useEffect(() => {\r\n    if (matched.length === tiles.length && matched.length > 0 && user) {\r\n      if (onScore) onScore(score, timer);\r\n      if (onComplete) onComplete();\r\n    }\r\n  }, [matched, tiles.length, score, timer, user, onScore, onComplete]);\r\n\r\n  const handleTileClick = (idx: number) => {\r\n    if (flipped.length === 2 || flipped.includes(idx) || matched.includes(idx)) return;\r\n    const newFlipped = [...flipped, idx];\r\n    setFlipped(newFlipped);\r\n    if (newFlipped.length === 2) {\r\n      const [first, second] = newFlipped;\r\n      if (tiles[first] === tiles[second]) {\r\n        setTimeout(() => {\r\n          setMatched([...matched, first, second]);\r\n          setFlipped([]);\r\n          setScore(s => s + 10);\r\n        }, 700);\r\n      } else {\r\n        setTimeout(() => setFlipped([]), 700);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"board-card\">\r\n      <h2 className=\"board-title\">Crazy Puzzle Board</h2>\r\n      {layout === 'grid' ? (\r\n        <div\r\n          className=\"puzzle-grid\"\r\n          style={{ ['--grid-size' as string]: gridSize } as React.CSSProperties}\r\n        >\r\n          {tiles.map((val, idx) => (\r\n            <div\r\n              key={idx}\r\n              onClick={() => handleTileClick(idx)}\r\n              className={`tile${flipped.includes(idx) || matched.includes(idx) ? ' flipped' : ''}`}\r\n            >\r\n              {(matched.includes(idx) || flipped.includes(idx)) ? (\r\n                difficulty === 'easy' ? (\r\n                  <img src={typeof val === 'string' ? val : ''} alt=\"animal\" className=\"tile-img\" />\r\n                ) : (\r\n                  val\r\n                )\r\n              ) : '?'}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <p>Other layouts coming soon!</p>\r\n      )}\r\n      {matched.length === tiles.length && (\r\n        <div className=\"congrats-msg\">\r\n          ðŸŽ‰ Congratulations! You completed the puzzle.<br />Final Score: {score} | Time: {timer}s\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PuzzleBoard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}