{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MARCE\\\\source\\\\repos\\\\CrazyPuzzle\\\\web\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { auth, db, realtimeDb } from './firebase';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { ref, onValue } from 'firebase/database';\nimport { onAuthStateChanged, signInWithPopup, signInWithRedirect, getRedirectResult, GoogleAuthProvider, signOut, setPersistence, browserLocalPersistence } from 'firebase/auth';\nimport SinglePlayerGame from './SinglePlayerGame';\nimport MultiplayerLobby from './MultiplayerLobby';\nimport MultiplayerGame from './MultiplayerGame';\nimport styles from './App.module.scss';\n\n// Version: 1.0.1 - Fixed mobile sign-in\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [gameMode, setGameMode] = useState('menu');\n  const [currentRoomId, setCurrentRoomId] = useState(null);\n  const [currentRoomDifficulty, setCurrentRoomDifficulty] = useState('easy');\n  const [currentRoomLayout, setCurrentRoomLayout] = useState('grid');\n  const [authLoading, setAuthLoading] = useState(true);\n  const [statusMessage, setStatusMessage] = useState(null);\n  const [userStats, setUserStats] = useState({\n    singlePlayerPoints: 0,\n    multiplayerPoints: 0\n  });\n  useEffect(() => {\n    let unsubscribe = null;\n    const initAuth = async () => {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const hasOAuthParams = ['code', 'state', 'error'].some(key => urlParams.has(key));\n        await setPersistence(auth, browserLocalPersistence);\n        console.log('âœ… Auth persistence set to LOCAL');\n        try {\n          const result = await getRedirectResult(auth);\n          console.log('getRedirectResult returned:', result);\n          if (result) {\n            setUser(result.user);\n            setStatusMessage({\n              text: `Signed in as ${result.user.displayName || result.user.email}`,\n              tone: 'success'\n            });\n            setAuthLoading(false);\n          } else if (hasOAuthParams) {\n            console.warn('Redirect completed but no user returned', window.location.href);\n            setStatusMessage({\n              text: 'We could not complete Google sign-in. Please try again.',\n              tone: 'error'\n            });\n          }\n        } catch (redirectError) {\n          console.error('âŒ Redirect error:', redirectError);\n          setStatusMessage({\n            text: `Sign-in redirect failed: ${redirectError.message}`,\n            tone: 'error'\n          });\n        }\n        unsubscribe = onAuthStateChanged(auth, currentUser => {\n          console.log('ðŸ‘¤ Auth state changed:', (currentUser === null || currentUser === void 0 ? void 0 : currentUser.displayName) || 'No user', (currentUser === null || currentUser === void 0 ? void 0 : currentUser.email) || '');\n          if (currentUser) {\n            setUser(currentUser);\n            setStatusMessage({\n              text: `Signed in as ${currentUser.displayName || currentUser.email}`,\n              tone: 'success'\n            });\n          } else {\n            setUser(null);\n            setStatusMessage(prev => (prev === null || prev === void 0 ? void 0 : prev.tone) === 'error' ? prev : null);\n          }\n          setAuthLoading(false);\n        });\n      } catch (error) {\n        console.error('âŒ Error in auth init:', error);\n        setStatusMessage({\n          text: `Auth initialization failed: ${error.message}`,\n          tone: 'error'\n        });\n        setAuthLoading(false);\n      }\n    };\n    initAuth();\n    return () => {\n      if (typeof unsubscribe === 'function') {\n        unsubscribe();\n      }\n    };\n  }, []);\n\n  // Fetch user stats\n  useEffect(() => {\n    if (!user) {\n      setUserStats({\n        singlePlayerPoints: 0,\n        multiplayerPoints: 0\n      });\n      return;\n    }\n    const fetchStats = async () => {\n      try {\n        // Get single player points from Firestore\n        const scoresRef = collection(db, 'scores');\n        const q = query(scoresRef, where('userId', '==', user.uid));\n        const snapshot = await getDocs(q);\n        const singlePlayerPoints = snapshot.docs.reduce((sum, doc) => sum + (doc.data().score || 0), 0);\n\n        // Get multiplayer points from Realtime Database\n        const userStatsRef = ref(realtimeDb, `userStats/${user.uid}`);\n        onValue(userStatsRef, snapshot => {\n          const data = snapshot.val();\n          const multiplayerPoints = (data === null || data === void 0 ? void 0 : data.multiplayerPoints) || 0;\n          setUserStats({\n            singlePlayerPoints,\n            multiplayerPoints\n          });\n        });\n      } catch (error) {\n        console.error('Error fetching user stats:', error);\n      }\n    };\n    fetchStats();\n  }, [user]);\n  const signInWithGoogle = async () => {\n    const provider = new GoogleAuthProvider();\n    provider.setCustomParameters({\n      prompt: 'select_account'\n    });\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n    console.log('ðŸ” Sign in initiated, isMobile:', isMobile);\n    try {\n      await setPersistence(auth, browserLocalPersistence);\n      setStatusMessage({\n        text: 'Opening Google sign-inâ€¦',\n        tone: 'info'\n      });\n      console.log('âœ… Persistence set');\n      try {\n        console.log('âœ¨ Trying signInWithPopup first');\n        await signInWithPopup(auth, provider);\n      } catch (popupError) {\n        const fallbackErrors = ['auth/popup-blocked', 'auth/popup-closed-by-user', 'auth/cancelled-popup-request', 'auth/operation-not-supported-in-this-environment'];\n        const shouldFallbackToRedirect = isMobile || fallbackErrors.includes(popupError.code);\n        console.warn('âš ï¸ Popup sign-in failed:', popupError.code, 'fallback?', shouldFallbackToRedirect);\n        if (!shouldFallbackToRedirect) {\n          throw popupError;\n        }\n        console.log('ðŸ“± Falling back to signInWithRedirect');\n        await signInWithRedirect(auth, provider);\n      }\n    } catch (error) {\n      console.error('âŒ Error signing in with Google:', error);\n      setStatusMessage({\n        text: error.code === 'auth/unauthorized-domain' ? 'Domain not authorized for Google sign-in. Please add crazypuzzlecrazy.web.app in Firebase Console.' : `Sign in failed: ${error.message}`,\n        tone: 'error'\n      });\n    }\n  };\n  const handleSignOut = async () => {\n    try {\n      await signOut(auth);\n      setStatusMessage({\n        text: 'Signed out successfully.',\n        tone: 'info'\n      });\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n  const handleJoinRoom = (roomId, roomDifficulty, roomLayout) => {\n    setCurrentRoomId(roomId);\n    setCurrentRoomDifficulty(roomDifficulty);\n    setCurrentRoomLayout(roomLayout);\n    setGameMode('multiplayer-game');\n  };\n  const handleLeaveRoom = () => {\n    setCurrentRoomId(null);\n    setGameMode('multiplayer-lobby');\n  };\n\n  // Show loading while checking auth state\n  if (authLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.appBg,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.menuContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.mainTitle,\n          children: \"\\uD83E\\uDDE9 CrazyPuzzle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Menu view\n  if (gameMode === 'menu') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.appBg,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.menuContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.mainTitle,\n          children: \"\\uD83E\\uDDE9 CrazyPuzzle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.subtitle,\n          children: \"Test your memory and compete with friends!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.authSection,\n          children: [user ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.userWelcome,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.photoURL || '',\n              alt: \"Avatar\",\n              className: styles.userAvatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.userInfo,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.userName,\n                children: [\"Welcome, \", user.displayName, \"!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.userPoints,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.pointsBadge,\n                  children: [\"\\uD83C\\uDFAF Single: \", userStats.singlePlayerPoints, \" pts\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.pointsBadge,\n                  children: [\"\\uD83D\\uDC65 Multi: \", userStats.multiplayerPoints, \" pts\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSignOut,\n              className: styles.signOutBtn,\n              children: \"Sign Out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.guestInfo,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\uD83C\\uDFAE Play as guest or sign in for more features\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: signInWithGoogle,\n              className: styles.signInBtn,\n              children: \"Sign in with Google\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), statusMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${styles.statusMessage} ${statusMessage.tone === 'success' ? styles.statusSuccess : statusMessage.tone === 'error' ? styles.statusError : styles.statusInfo}`,\n            children: statusMessage.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.modeSelection,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setGameMode('singleplayer'),\n            className: styles.modeBtn,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.modeIcon,\n              children: \"\\uD83C\\uDFAF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.modeTitle,\n              children: \"Single Player\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.modeDesc,\n              children: \"Play solo and beat your best time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (!user) {\n                setStatusMessage({\n                  text: 'Please sign in to play multiplayer.',\n                  tone: 'info'\n                });\n                return;\n              }\n              setGameMode('multiplayer-lobby');\n            },\n            className: styles.modeBtn,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.modeIcon,\n              children: \"\\uD83D\\uDC65\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.modeTitle,\n              children: \"Multiplayer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.modeDesc,\n              children: \"Compete with friends in real-time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), !user && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.requiresAuth,\n              children: \"Requires sign in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Multiplayer lobby view\n  if (gameMode === 'multiplayer-lobby' && user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.appBg,\n      children: /*#__PURE__*/_jsxDEV(MultiplayerLobby, {\n        user: user,\n        onJoinRoom: handleJoinRoom,\n        onBackToSinglePlayer: () => setGameMode('menu')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Multiplayer game view\n  if (gameMode === 'multiplayer-game' && user && currentRoomId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.appBg,\n      children: /*#__PURE__*/_jsxDEV(MultiplayerGame, {\n        roomId: currentRoomId,\n        user: user,\n        difficulty: currentRoomDifficulty,\n        layout: currentRoomLayout,\n        onLeaveRoom: handleLeaveRoom,\n        onBackToMenu: () => setGameMode('menu')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Single player mode\n  return /*#__PURE__*/_jsxDEV(SinglePlayerGame, {\n    user: user,\n    onBackToMenu: () => setGameMode('menu'),\n    onSignInWithGoogle: signInWithGoogle,\n    onSignOut: handleSignOut\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 309,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"XHoQ3QEcZo3aREStCXLH0CUhdnE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","auth","db","realtimeDb","collection","query","where","getDocs","ref","onValue","onAuthStateChanged","signInWithPopup","signInWithRedirect","getRedirectResult","GoogleAuthProvider","signOut","setPersistence","browserLocalPersistence","SinglePlayerGame","MultiplayerLobby","MultiplayerGame","styles","jsxDEV","_jsxDEV","App","_s","user","setUser","gameMode","setGameMode","currentRoomId","setCurrentRoomId","currentRoomDifficulty","setCurrentRoomDifficulty","currentRoomLayout","setCurrentRoomLayout","authLoading","setAuthLoading","statusMessage","setStatusMessage","userStats","setUserStats","singlePlayerPoints","multiplayerPoints","unsubscribe","initAuth","urlParams","URLSearchParams","window","location","search","hasOAuthParams","some","key","has","console","log","result","text","displayName","email","tone","warn","href","redirectError","error","message","currentUser","prev","fetchStats","scoresRef","q","uid","snapshot","docs","reduce","sum","doc","data","score","userStatsRef","val","signInWithGoogle","provider","setCustomParameters","prompt","isMobile","test","navigator","userAgent","popupError","fallbackErrors","shouldFallbackToRedirect","includes","code","handleSignOut","handleJoinRoom","roomId","roomDifficulty","roomLayout","handleLeaveRoom","className","appBg","children","menuContainer","mainTitle","fileName","_jsxFileName","lineNumber","columnNumber","subtitle","authSection","userWelcome","src","photoURL","alt","userAvatar","userInfo","userName","userPoints","pointsBadge","onClick","signOutBtn","guestInfo","signInBtn","statusSuccess","statusError","statusInfo","modeSelection","modeBtn","modeIcon","modeTitle","modeDesc","requiresAuth","onJoinRoom","onBackToSinglePlayer","difficulty","layout","onLeaveRoom","onBackToMenu","onSignInWithGoogle","onSignOut","_c","$RefreshReg$"],"sources":["C:/Users/MARCE/source/repos/CrazyPuzzle/web/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { User } from 'firebase/auth';\nimport { auth, db, realtimeDb } from './firebase';\nimport { collection, query, where, getDocs, orderBy, limit } from 'firebase/firestore';\nimport { ref, onValue } from 'firebase/database';\nimport { onAuthStateChanged, signInWithPopup, signInWithRedirect, getRedirectResult, GoogleAuthProvider, signOut, setPersistence, browserLocalPersistence } from 'firebase/auth';\nimport SinglePlayerGame from './SinglePlayerGame';\nimport MultiplayerLobby from './MultiplayerLobby';\nimport MultiplayerGame from './MultiplayerGame';\nimport { Difficulty, Layout } from './DifficultySelector';\nimport styles from './App.module.scss';\n\n// Version: 1.0.1 - Fixed mobile sign-in\n\ntype GameMode = 'menu' | 'singleplayer' | 'multiplayer-lobby' | 'multiplayer-game';\ntype StatusTone = 'info' | 'success' | 'error';\n\nfunction App() {\n  const [user, setUser] = useState<User | null>(null);\n  const [gameMode, setGameMode] = useState<GameMode>('menu');\n  const [currentRoomId, setCurrentRoomId] = useState<string | null>(null);\n  const [currentRoomDifficulty, setCurrentRoomDifficulty] = useState<Difficulty>('easy');\n  const [currentRoomLayout, setCurrentRoomLayout] = useState<Layout>('grid');\n  const [authLoading, setAuthLoading] = useState(true);\n  const [statusMessage, setStatusMessage] = useState<{ text: string; tone: StatusTone } | null>(null);\n  const [userStats, setUserStats] = useState<{ singlePlayerPoints: number; multiplayerPoints: number }>({ singlePlayerPoints: 0, multiplayerPoints: 0 });\n\n  useEffect(() => {\n    let unsubscribe: (() => void) | null = null;\n\n    const initAuth = async () => {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const hasOAuthParams = ['code', 'state', 'error'].some((key) => urlParams.has(key));\n\n        await setPersistence(auth, browserLocalPersistence);\n        console.log('âœ… Auth persistence set to LOCAL');\n\n        try {\n          const result = await getRedirectResult(auth);\n          console.log('getRedirectResult returned:', result);\n          if (result) {\n            setUser(result.user);\n            setStatusMessage({\n              text: `Signed in as ${result.user.displayName || result.user.email}`,\n              tone: 'success'\n            });\n            setAuthLoading(false);\n          } else if (hasOAuthParams) {\n            console.warn('Redirect completed but no user returned', window.location.href);\n            setStatusMessage({\n              text: 'We could not complete Google sign-in. Please try again.',\n              tone: 'error'\n            });\n          }\n        } catch (redirectError: any) {\n          console.error('âŒ Redirect error:', redirectError);\n          setStatusMessage({\n            text: `Sign-in redirect failed: ${redirectError.message}`,\n            tone: 'error'\n          });\n        }\n\n        unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n          console.log('ðŸ‘¤ Auth state changed:', currentUser?.displayName || 'No user', currentUser?.email || '');\n\n          if (currentUser) {\n            setUser(currentUser);\n            setStatusMessage({\n              text: `Signed in as ${currentUser.displayName || currentUser.email}`,\n              tone: 'success'\n            });\n          } else {\n            setUser(null);\n            setStatusMessage((prev) => (prev?.tone === 'error' ? prev : null));\n          }\n          setAuthLoading(false);\n        });\n      } catch (error: any) {\n        console.error('âŒ Error in auth init:', error);\n        setStatusMessage({\n          text: `Auth initialization failed: ${error.message}`,\n          tone: 'error'\n        });\n        setAuthLoading(false);\n      }\n    };\n\n    initAuth();\n\n    return () => {\n      if (typeof unsubscribe === 'function') {\n        unsubscribe();\n      }\n    };\n  }, []);\n\n  // Fetch user stats\n  useEffect(() => {\n    if (!user) {\n      setUserStats({ singlePlayerPoints: 0, multiplayerPoints: 0 });\n      return;\n    }\n\n    const fetchStats = async () => {\n      try {\n        // Get single player points from Firestore\n        const scoresRef = collection(db, 'scores');\n        const q = query(scoresRef, where('userId', '==', user.uid));\n        const snapshot = await getDocs(q);\n        const singlePlayerPoints = snapshot.docs.reduce((sum, doc) => sum + (doc.data().score || 0), 0);\n\n        // Get multiplayer points from Realtime Database\n        const userStatsRef = ref(realtimeDb, `userStats/${user.uid}`);\n        onValue(userStatsRef, (snapshot) => {\n          const data = snapshot.val();\n          const multiplayerPoints = data?.multiplayerPoints || 0;\n          setUserStats({ singlePlayerPoints, multiplayerPoints });\n        });\n      } catch (error) {\n        console.error('Error fetching user stats:', error);\n      }\n    };\n\n    fetchStats();\n  }, [user]);\n\n  const signInWithGoogle = async () => {\n    const provider = new GoogleAuthProvider();\n    provider.setCustomParameters({ prompt: 'select_account' });\n\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n    console.log('ðŸ” Sign in initiated, isMobile:', isMobile);\n\n    try {\n      await setPersistence(auth, browserLocalPersistence);\n      setStatusMessage({ text: 'Opening Google sign-inâ€¦', tone: 'info' });\n      console.log('âœ… Persistence set');\n\n      try {\n        console.log('âœ¨ Trying signInWithPopup first');\n        await signInWithPopup(auth, provider);\n      } catch (popupError: any) {\n        const fallbackErrors = ['auth/popup-blocked', 'auth/popup-closed-by-user', 'auth/cancelled-popup-request', 'auth/operation-not-supported-in-this-environment'];\n        const shouldFallbackToRedirect = isMobile || fallbackErrors.includes(popupError.code);\n        console.warn('âš ï¸ Popup sign-in failed:', popupError.code, 'fallback?', shouldFallbackToRedirect);\n\n        if (!shouldFallbackToRedirect) {\n          throw popupError;\n        }\n\n        console.log('ðŸ“± Falling back to signInWithRedirect');\n        await signInWithRedirect(auth, provider);\n      }\n    } catch (error: any) {\n      console.error('âŒ Error signing in with Google:', error);\n      setStatusMessage({\n        text: error.code === 'auth/unauthorized-domain'\n          ? 'Domain not authorized for Google sign-in. Please add crazypuzzlecrazy.web.app in Firebase Console.'\n          : `Sign in failed: ${error.message}`,\n        tone: 'error'\n      });\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut(auth);\n      setStatusMessage({ text: 'Signed out successfully.', tone: 'info' });\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  const handleJoinRoom = (roomId: string, roomDifficulty: Difficulty, roomLayout: Layout) => {\n    setCurrentRoomId(roomId);\n    setCurrentRoomDifficulty(roomDifficulty);\n    setCurrentRoomLayout(roomLayout);\n    setGameMode('multiplayer-game');\n  };\n\n  const handleLeaveRoom = () => {\n    setCurrentRoomId(null);\n    setGameMode('multiplayer-lobby');\n  };\n\n  // Show loading while checking auth state\n  if (authLoading) {\n    return (\n      <div className={styles.appBg}>\n        <div className={styles.menuContainer}>\n          <h1 className={styles.mainTitle}>ðŸ§© CrazyPuzzle</h1>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Menu view\n  if (gameMode === 'menu') {\n    return (\n      <div className={styles.appBg}>\n        <div className={styles.menuContainer}>\n          <h1 className={styles.mainTitle}>ðŸ§© CrazyPuzzle</h1>\n          <p className={styles.subtitle}>Test your memory and compete with friends!</p>\n          \n          <div className={styles.authSection}>\n            {user ? (\n              <div className={styles.userWelcome}>\n                <img src={user.photoURL || ''} alt=\"Avatar\" className={styles.userAvatar} />\n                <div className={styles.userInfo}>\n                  <span className={styles.userName}>Welcome, {user.displayName}!</span>\n                  <div className={styles.userPoints}>\n                    <span className={styles.pointsBadge}>\n                      ðŸŽ¯ Single: {userStats.singlePlayerPoints} pts\n                    </span>\n                    <span className={styles.pointsBadge}>\n                      ðŸ‘¥ Multi: {userStats.multiplayerPoints} pts\n                    </span>\n                  </div>\n                </div>\n                <button onClick={handleSignOut} className={styles.signOutBtn}>Sign Out</button>\n              </div>\n            ) : (\n              <div className={styles.guestInfo}>\n                <p>ðŸŽ® Play as guest or sign in for more features</p>\n                <button onClick={signInWithGoogle} className={styles.signInBtn}>\n                  Sign in with Google\n                </button>\n              </div>\n            )}\n            {statusMessage && (\n              <div\n                className={`${styles.statusMessage} ${\n                  statusMessage.tone === 'success'\n                    ? styles.statusSuccess\n                    : statusMessage.tone === 'error'\n                    ? styles.statusError\n                    : styles.statusInfo\n                }`}\n              >\n                {statusMessage.text}\n              </div>\n            )}\n          </div>\n\n          <div className={styles.modeSelection}>\n            <button \n              onClick={() => setGameMode('singleplayer')} \n              className={styles.modeBtn}\n            >\n              <span className={styles.modeIcon}>ðŸŽ¯</span>\n              <span className={styles.modeTitle}>Single Player</span>\n              <span className={styles.modeDesc}>Play solo and beat your best time</span>\n            </button>\n\n            <button \n              onClick={() => {\n                if (!user) {\n                  setStatusMessage({ text: 'Please sign in to play multiplayer.', tone: 'info' });\n                  return;\n                }\n                setGameMode('multiplayer-lobby');\n              }} \n              className={styles.modeBtn}\n            >\n              <span className={styles.modeIcon}>ðŸ‘¥</span>\n              <span className={styles.modeTitle}>Multiplayer</span>\n              <span className={styles.modeDesc}>Compete with friends in real-time</span>\n              {!user && <span className={styles.requiresAuth}>Requires sign in</span>}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Multiplayer lobby view\n  if (gameMode === 'multiplayer-lobby' && user) {\n    return (\n      <div className={styles.appBg}>\n        <MultiplayerLobby \n          user={user}\n          onJoinRoom={handleJoinRoom}\n          onBackToSinglePlayer={() => setGameMode('menu')}\n        />\n      </div>\n    );\n  }\n\n  // Multiplayer game view\n  if (gameMode === 'multiplayer-game' && user && currentRoomId) {\n    return (\n      <div className={styles.appBg}>\n        <MultiplayerGame \n          roomId={currentRoomId}\n          user={user}\n          difficulty={currentRoomDifficulty}\n          layout={currentRoomLayout}\n          onLeaveRoom={handleLeaveRoom}\n          onBackToMenu={() => setGameMode('menu')}\n        />\n      </div>\n    );\n  }\n\n  // Single player mode\n  return (\n    <SinglePlayerGame \n      user={user}\n      onBackToMenu={() => setGameMode('menu')}\n      onSignInWithGoogle={signInWithGoogle}\n      onSignOut={handleSignOut}\n    />\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}