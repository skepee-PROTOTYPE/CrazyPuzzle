{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{db}from'./firebase';import{collection,addDoc}from'firebase/firestore';import{isFacebookInstantGame}from'./platform';import styles from'./PuzzleBoard.module.scss';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function PuzzleBoard(_ref){let{difficulty,layout,user,onScore,onComplete}=_ref;// normalize grid sizes to even totals (pairs) to avoid missing tiles\nconst gridSizes={easy:4,medium:6,hard:8};// use the mapping (fallback to 4)\nconst gridSize=gridSizes[difficulty]||4;const difficultyClass=(difficulty||'easy').toLowerCase();// 'easy' | 'medium' | 'hard'\nconst totalTiles=gridSize*gridSize;const[tiles,setTiles]=useState([]);const[flippedTiles,setFlippedTiles]=useState([]);const[matchedTiles,setMatchedTiles]=useState([]);const[moves,setMoves]=useState(0);const[timer,setTimer]=useState(0);const[gameStarted,setGameStarted]=useState(false);const[gameCompleted,setGameCompleted]=useState(false);// Check if current layout is implemented\nconst isLayoutImplemented=layout==='grid';// Initialize game\nuseEffect(()=>{if(!isLayoutImplemented)return;// ensure totalTiles is even (pairs). If odd, reduce by 1 to make it even\nconst safeTotal=totalTiles%2===0?totalTiles:totalTiles-1;const pairCount=safeTotal/2;const numbers=Array.from({length:pairCount},(_,i)=>i+1);const shuffledTiles=[...numbers,...numbers].sort(()=>Math.random()-0.5);// if grid has an extra cell (odd), fill with a placeholder (0) â€” though mapping above uses even totals\nif(shuffledTiles.length<totalTiles)shuffledTiles.push(0);setTiles(shuffledTiles);setFlippedTiles([]);setMatchedTiles([]);setMoves(0);setTimer(0);setGameStarted(false);setGameCompleted(false);},[difficulty,layout,totalTiles,isLayoutImplemented]);// Timer effect\nuseEffect(()=>{if(gameStarted&&!gameCompleted&&isLayoutImplemented){const interval=setInterval(()=>setTimer(prev=>prev+1),1000);return()=>clearInterval(interval);}},[gameStarted,gameCompleted,isLayoutImplemented]);// Check for matches\nuseEffect(()=>{if(!isLayoutImplemented)return;if(flippedTiles.length===2){const[first,second]=flippedTiles;if(tiles[first]===tiles[second]){setMatchedTiles(prev=>[...prev,first,second]);setFlippedTiles([]);}else{setTimeout(()=>setFlippedTiles([]),1000);}}},[flippedTiles,tiles,isLayoutImplemented]);const saveScore=useCallback(async(score,time)=>{if(!user){console.error('âŒ Cannot save score: user is null');return;}console.log('ðŸ’¾ Saving score:',{userId:user.uid,userName:user.displayName,score,time,difficulty,layout});try{const docRef=await addDoc(collection(db,'scores'),{userId:user.uid,userName:user.displayName||'Anonymous',score,time,difficulty,layout,createdAt:new Date()});console.log('âœ… Score saved successfully! Doc ID:',docRef.id);}catch(error){console.error('âŒ Failed to save score:',error);}},[user,difficulty,layout]);// Check game completion\nuseEffect(()=>{if(!isLayoutImplemented)return;if(matchedTiles.length===totalTiles&&totalTiles>0){setGameCompleted(true);const score=Math.max(1000-moves*10-timer,100);if(user&&onScore){onScore(score,timer);saveScore(score,timer);}if(onComplete){onComplete();}}},[matchedTiles.length,totalTiles,moves,timer,user,onScore,onComplete,saveScore,isLayoutImplemented]);const handleTileClick=index=>{if(!isLayoutImplemented)return;if(!gameStarted)setGameStarted(true);if(flippedTiles.length===2||flippedTiles.includes(index)||matchedTiles.includes(index)){return;}setFlippedTiles(prev=>[...prev,index]);setMoves(prev=>prev+1);};const resetGame=()=>{if(!isLayoutImplemented)return;const numbers=Array.from({length:totalTiles/2},(_,i)=>i+1);const shuffledTiles=[...numbers,...numbers].sort(()=>Math.random()-0.5);setTiles(shuffledTiles);setFlippedTiles([]);setMatchedTiles([]);setMoves(0);setTimer(0);setGameStarted(false);setGameCompleted(false);};// Inline CSS variable for SCSS --grid-size\nconst gridStyle={['--grid-size']:gridSize};// debug mapped class names\n// Also log actual DOM classes after render if needed\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.boardCard,children:[/*#__PURE__*/_jsxs(\"h3\",{className:styles.boardTitle,children:[\"Puzzle Board - \",difficulty.charAt(0).toUpperCase()+difficulty.slice(1),\" (\",gridSize,\"x\",gridSize,\") - \",layout.charAt(0).toUpperCase()+layout.slice(1),\" Layout\"]}),!isLayoutImplemented?/*#__PURE__*/// Show \"Coming Soon\" message for unimplemented layouts\n_jsxs(\"div\",{className:styles.comingSoon,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.comingSoonIcon,children:\"\\uD83D\\uDEA7\"}),/*#__PURE__*/_jsx(\"h4\",{className:styles.comingSoonTitle,children:\"Coming Soon!\"}),/*#__PURE__*/_jsxs(\"p\",{className:styles.comingSoonText,children:[\"The \",/*#__PURE__*/_jsx(\"strong\",{children:layout.charAt(0).toUpperCase()+layout.slice(1)}),\" layout is under development.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:styles.comingSoonSubtext,children:[\"Please select \",/*#__PURE__*/_jsx(\"strong\",{children:\"Grid\"}),\" layout to play the game.\"]})]}):/*#__PURE__*/// Show the actual game for implemented layouts (grid)\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{// apply both module classes: puzzleGrid + difficulty (module lookup ensures hashed name)\nclassName:\"\".concat(styles.puzzleGrid,\" \").concat(styles[difficultyClass]||''),style:gridStyle,role:\"grid\",\"aria-label\":\"Puzzle grid \".concat(difficulty),children:tiles.map((tile,i)=>{const isFlipped=flippedTiles.includes(i)||matchedTiles.includes(i);const isMatched=matchedTiles.includes(i);const tileClasses=\"\".concat(styles.tile,\" \").concat(isFlipped?styles.flipped:'',\" \").concat(isMatched?styles.matched:'');return/*#__PURE__*/_jsx(\"div\",{className:tileClasses,onClick:()=>handleTileClick(i),role:\"button\",tabIndex:0,onKeyDown:e=>{if(e.key==='Enter'||e.key===' ')handleTileClick(i);},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tileInner,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.tileFront}),/*#__PURE__*/_jsx(\"div\",{className:styles.tileBack,children:tile!==0?tile:''})]})},i);})}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:'20px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Moves: \",moves,\" | Time: \",timer,\"s\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetGame,className:styles.btn,children:\"New Game\"})]}),gameCompleted&&/*#__PURE__*/_jsxs(\"div\",{className:styles.congratsMsg,children:[\"\\uD83C\\uDF89 Congratulations! You completed the puzzle in \",moves,\" moves and \",timer,\" seconds!\",user?/*#__PURE__*/_jsxs(\"p\",{children:[\"Score: \",Math.max(1000-moves*10-timer,100),\" (Saved to leaderboard!)\"]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Score: \",Math.max(1000-moves*10-timer,100)]}),!isFacebookInstantGame()&&/*#__PURE__*/_jsx(\"p\",{className:styles.guestHint,children:\"\\uD83D\\uDCA1 Sign in with Google to save your high scores to the leaderboard!\"})]})]})]})]});}export default PuzzleBoard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","db","collection","addDoc","isFacebookInstantGame","styles","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","PuzzleBoard","_ref","difficulty","layout","user","onScore","onComplete","gridSizes","easy","medium","hard","gridSize","difficultyClass","toLowerCase","totalTiles","tiles","setTiles","flippedTiles","setFlippedTiles","matchedTiles","setMatchedTiles","moves","setMoves","timer","setTimer","gameStarted","setGameStarted","gameCompleted","setGameCompleted","isLayoutImplemented","safeTotal","pairCount","numbers","Array","from","length","_","i","shuffledTiles","sort","Math","random","push","interval","setInterval","prev","clearInterval","first","second","setTimeout","saveScore","score","time","console","error","log","userId","uid","userName","displayName","docRef","createdAt","Date","id","max","handleTileClick","index","includes","resetGame","gridStyle","className","boardCard","children","boardTitle","charAt","toUpperCase","slice","comingSoon","comingSoonIcon","comingSoonTitle","comingSoonText","comingSoonSubtext","concat","puzzleGrid","style","role","map","tile","isFlipped","isMatched","tileClasses","flipped","matched","onClick","tabIndex","onKeyDown","e","key","tileInner","tileFront","tileBack","textAlign","marginTop","btn","congratsMsg","guestHint"],"sources":["C:/Users/MARCE/source/repos/CrazyPuzzle/web/src/PuzzleBoard.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { User } from 'firebase/auth';\r\nimport { db } from './firebase';\r\nimport { collection, addDoc } from 'firebase/firestore';\r\nimport { isFacebookInstantGame } from './platform';\r\nimport styles from './PuzzleBoard.module.scss';\r\n\r\ninterface PuzzleBoardProps {\r\n  difficulty: 'easy' | 'medium' | 'hard' | string;\r\n  layout: string;\r\n  user?: User | null;\r\n  onScore?: (score: number, timer: number) => void;\r\n  onComplete?: () => void;\r\n}\r\n\r\nfunction PuzzleBoard({ difficulty, layout, user, onScore, onComplete }: PuzzleBoardProps) {\r\n  // normalize grid sizes to even totals (pairs) to avoid missing tiles\r\n  const gridSizes: Record<'easy' | 'medium' | 'hard', number> = { easy: 4, medium: 6, hard: 8 };\r\n  // use the mapping (fallback to 4)\r\n  const gridSize = (gridSizes[(difficulty as 'easy' | 'medium' | 'hard')] || 4);\r\n  const difficultyClass = (difficulty || 'easy').toLowerCase(); // 'easy' | 'medium' | 'hard'\r\n  const totalTiles = gridSize * gridSize;\r\n  \r\n  const [tiles, setTiles] = useState<number[]>([]);\r\n  const [flippedTiles, setFlippedTiles] = useState<number[]>([]);\r\n  const [matchedTiles, setMatchedTiles] = useState<number[]>([]);\r\n  const [moves, setMoves] = useState(0);\r\n  const [timer, setTimer] = useState(0);\r\n  const [gameStarted, setGameStarted] = useState(false);\r\n  const [gameCompleted, setGameCompleted] = useState(false);\r\n\r\n  // Check if current layout is implemented\r\n  const isLayoutImplemented = layout === 'grid';\r\n\r\n  // Initialize game\r\n  useEffect(() => {\r\n    if (!isLayoutImplemented) return;\r\n    \r\n    // ensure totalTiles is even (pairs). If odd, reduce by 1 to make it even\r\n    const safeTotal = totalTiles % 2 === 0 ? totalTiles : totalTiles - 1;\r\n    const pairCount = safeTotal / 2;\r\n    const numbers = Array.from({ length: pairCount }, (_, i) => i + 1);\r\n    const shuffledTiles = [...numbers, ...numbers].sort(() => Math.random() - 0.5);\r\n\r\n    // if grid has an extra cell (odd), fill with a placeholder (0) â€” though mapping above uses even totals\r\n    if (shuffledTiles.length < totalTiles) shuffledTiles.push(0);\r\n\r\n    setTiles(shuffledTiles);\r\n    setFlippedTiles([]);\r\n    setMatchedTiles([]);\r\n    setMoves(0);\r\n    setTimer(0);\r\n    setGameStarted(false);\r\n    setGameCompleted(false);\r\n  }, [difficulty, layout, totalTiles, isLayoutImplemented]);\r\n\r\n  // Timer effect\r\n  useEffect(() => {\r\n    if (gameStarted && !gameCompleted && isLayoutImplemented) {\r\n      const interval = setInterval(() => setTimer(prev => prev + 1), 1000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [gameStarted, gameCompleted, isLayoutImplemented]);\r\n\r\n  // Check for matches\r\n  useEffect(() => {\r\n    if (!isLayoutImplemented) return;\r\n    \r\n    if (flippedTiles.length === 2) {\r\n      const [first, second] = flippedTiles;\r\n      if (tiles[first] === tiles[second]) {\r\n        setMatchedTiles(prev => [...prev, first, second]);\r\n        setFlippedTiles([]);\r\n      } else {\r\n        setTimeout(() => setFlippedTiles([]), 1000);\r\n      }\r\n    }\r\n  }, [flippedTiles, tiles, isLayoutImplemented]);\r\n\r\n  const saveScore = useCallback(async (score: number, time: number) => {\r\n    if (!user) {\r\n      console.error('âŒ Cannot save score: user is null');\r\n      return;\r\n    }\r\n    \r\n    console.log('ðŸ’¾ Saving score:', {\r\n      userId: user.uid,\r\n      userName: user.displayName,\r\n      score,\r\n      time,\r\n      difficulty,\r\n      layout\r\n    });\r\n    \r\n    try {\r\n      const docRef = await addDoc(collection(db, 'scores'), {\r\n        userId: user.uid,\r\n        userName: user.displayName || 'Anonymous',\r\n        score,\r\n        time,\r\n        difficulty,\r\n        layout,\r\n        createdAt: new Date()\r\n      });\r\n      console.log('âœ… Score saved successfully! Doc ID:', docRef.id);\r\n    } catch (error) {\r\n      console.error('âŒ Failed to save score:', error);\r\n    }\r\n  }, [user, difficulty, layout]);\r\n\r\n  // Check game completion\r\n  useEffect(() => {\r\n    if (!isLayoutImplemented) return;\r\n    \r\n    if (matchedTiles.length === totalTiles && totalTiles > 0) {\r\n      setGameCompleted(true);\r\n      const score = Math.max(1000 - moves * 10 - timer, 100);\r\n      \r\n      if (user && onScore) {\r\n        onScore(score, timer);\r\n        saveScore(score, timer);\r\n      }\r\n      \r\n      if (onComplete) {\r\n        onComplete();\r\n      }\r\n    }\r\n  }, [matchedTiles.length, totalTiles, moves, timer, user, onScore, onComplete, saveScore, isLayoutImplemented]);\r\n\r\n  const handleTileClick = (index: number) => {\r\n    if (!isLayoutImplemented) return;\r\n    \r\n    if (!gameStarted) setGameStarted(true);\r\n    \r\n    if (flippedTiles.length === 2 || flippedTiles.includes(index) || matchedTiles.includes(index)) {\r\n      return;\r\n    }\r\n\r\n    setFlippedTiles(prev => [...prev, index]);\r\n    setMoves(prev => prev + 1);\r\n  };\r\n\r\n  const resetGame = () => {\r\n    if (!isLayoutImplemented) return;\r\n    \r\n    const numbers = Array.from({ length: totalTiles / 2 }, (_, i) => i + 1);\r\n    const shuffledTiles = [...numbers, ...numbers].sort(() => Math.random() - 0.5);\r\n    setTiles(shuffledTiles);\r\n    setFlippedTiles([]);\r\n    setMatchedTiles([]);\r\n    setMoves(0);\r\n    setTimer(0);\r\n    setGameStarted(false);\r\n    setGameCompleted(false);\r\n  };\r\n\r\n  // Inline CSS variable for SCSS --grid-size\r\n  const gridStyle: React.CSSProperties = {\r\n    ['--grid-size' as any]: gridSize\r\n  };\r\n // debug mapped class names\r\n  // Also log actual DOM classes after render if needed\r\n\r\n  return (\r\n    <div className={styles.boardCard}>\r\n      <h3 className={styles.boardTitle}>\r\n        Puzzle Board - {difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} ({gridSize}x{gridSize}) - {layout.charAt(0).toUpperCase() + layout.slice(1)} Layout\r\n      </h3>\r\n      \r\n      {!isLayoutImplemented ? (\r\n        // Show \"Coming Soon\" message for unimplemented layouts\r\n        <div className={styles.comingSoon}>\r\n          <div className={styles.comingSoonIcon}>ðŸš§</div>\r\n          <h4 className={styles.comingSoonTitle}>Coming Soon!</h4>\r\n          <p className={styles.comingSoonText}>\r\n            The <strong>{layout.charAt(0).toUpperCase() + layout.slice(1)}</strong> layout is under development.\r\n          </p>\r\n          <p className={styles.comingSoonSubtext}>\r\n            Please select <strong>Grid</strong> layout to play the game.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        // Show the actual game for implemented layouts (grid)\r\n        <>\r\n          <div\r\n            // apply both module classes: puzzleGrid + difficulty (module lookup ensures hashed name)\r\n            className={`${styles.puzzleGrid} ${styles[difficultyClass] || ''}`}\r\n            style={gridStyle}\r\n            role=\"grid\"\r\n            aria-label={`Puzzle grid ${difficulty}`}\r\n          >\r\n            {tiles.map((tile, i) => {\r\n              const isFlipped = flippedTiles.includes(i) || matchedTiles.includes(i);\r\n              const isMatched = matchedTiles.includes(i);\r\n              const tileClasses = `${styles.tile} ${isFlipped ? styles.flipped : ''} ${isMatched ? styles.matched : ''}`;\r\n              \r\n              return (\r\n                <div\r\n                  key={i}\r\n                  className={tileClasses}\r\n                  onClick={() => handleTileClick(i)}\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') handleTileClick(i); }}\r\n                >\r\n                  <div className={styles.tileInner}>\r\n                    <div className={styles.tileFront} />\r\n                    <div className={styles.tileBack}>{tile !== 0 ? tile : ''}</div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n            <p>Moves: {moves} | Time: {timer}s</p>\r\n            <button onClick={resetGame} className={styles.btn}>New Game</button>\r\n          </div>\r\n\r\n          {gameCompleted && (\r\n            <div className={styles.congratsMsg}>\r\n              ðŸŽ‰ Congratulations! You completed the puzzle in {moves} moves and {timer} seconds!\r\n              {user ? (\r\n                <p>Score: {Math.max(1000 - moves * 10 - timer, 100)} (Saved to leaderboard!)</p>\r\n              ) : (\r\n                <div>\r\n                  <p>Score: {Math.max(1000 - moves * 10 - timer, 100)}</p>\r\n                  {!isFacebookInstantGame() && (\r\n                    <p className={styles.guestHint}>\r\n                      ðŸ’¡ Sign in with Google to save your high scores to the leaderboard!\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PuzzleBoard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAE/D,OAASC,EAAE,KAAQ,YAAY,CAC/B,OAASC,UAAU,CAAEC,MAAM,KAAQ,oBAAoB,CACvD,OAASC,qBAAqB,KAAQ,YAAY,CAClD,MAAO,CAAAC,MAAM,KAAM,2BAA2B,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAU/C,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAsE,IAArE,CAAEC,UAAU,CAAEC,MAAM,CAAEC,IAAI,CAAEC,OAAO,CAAEC,UAA6B,CAAC,CAAAL,IAAA,CACtF;AACA,KAAM,CAAAM,SAAqD,CAAG,CAAEC,IAAI,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAE,CAAC,CAC7F;AACA,KAAM,CAAAC,QAAQ,CAAIJ,SAAS,CAAEL,UAAU,CAAgC,EAAI,CAAE,CAC7E,KAAM,CAAAU,eAAe,CAAG,CAACV,UAAU,EAAI,MAAM,EAAEW,WAAW,CAAC,CAAC,CAAE;AAC9D,KAAM,CAAAC,UAAU,CAAGH,QAAQ,CAAGA,QAAQ,CAEtC,KAAM,CAACI,KAAK,CAAEC,QAAQ,CAAC,CAAG9B,QAAQ,CAAW,EAAE,CAAC,CAChD,KAAM,CAAC+B,YAAY,CAAEC,eAAe,CAAC,CAAGhC,QAAQ,CAAW,EAAE,CAAC,CAC9D,KAAM,CAACiC,YAAY,CAAEC,eAAe,CAAC,CAAGlC,QAAQ,CAAW,EAAE,CAAC,CAC9D,KAAM,CAACmC,KAAK,CAAEC,QAAQ,CAAC,CAAGpC,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACqC,KAAK,CAAEC,QAAQ,CAAC,CAAGtC,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACuC,WAAW,CAAEC,cAAc,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACyC,aAAa,CAAEC,gBAAgB,CAAC,CAAG1C,QAAQ,CAAC,KAAK,CAAC,CAEzD;AACA,KAAM,CAAA2C,mBAAmB,CAAG1B,MAAM,GAAK,MAAM,CAE7C;AACAhB,SAAS,CAAC,IAAM,CACd,GAAI,CAAC0C,mBAAmB,CAAE,OAE1B;AACA,KAAM,CAAAC,SAAS,CAAGhB,UAAU,CAAG,CAAC,GAAK,CAAC,CAAGA,UAAU,CAAGA,UAAU,CAAG,CAAC,CACpE,KAAM,CAAAiB,SAAS,CAAGD,SAAS,CAAG,CAAC,CAC/B,KAAM,CAAAE,OAAO,CAAGC,KAAK,CAACC,IAAI,CAAC,CAAEC,MAAM,CAAEJ,SAAU,CAAC,CAAE,CAACK,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAAG,CAAC,CAAC,CAClE,KAAM,CAAAC,aAAa,CAAG,CAAC,GAAGN,OAAO,CAAE,GAAGA,OAAO,CAAC,CAACO,IAAI,CAAC,IAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAE9E;AACA,GAAIH,aAAa,CAACH,MAAM,CAAGrB,UAAU,CAAEwB,aAAa,CAACI,IAAI,CAAC,CAAC,CAAC,CAE5D1B,QAAQ,CAACsB,aAAa,CAAC,CACvBpB,eAAe,CAAC,EAAE,CAAC,CACnBE,eAAe,CAAC,EAAE,CAAC,CACnBE,QAAQ,CAAC,CAAC,CAAC,CACXE,QAAQ,CAAC,CAAC,CAAC,CACXE,cAAc,CAAC,KAAK,CAAC,CACrBE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAAE,CAAC1B,UAAU,CAAEC,MAAM,CAAEW,UAAU,CAAEe,mBAAmB,CAAC,CAAC,CAEzD;AACA1C,SAAS,CAAC,IAAM,CACd,GAAIsC,WAAW,EAAI,CAACE,aAAa,EAAIE,mBAAmB,CAAE,CACxD,KAAM,CAAAc,QAAQ,CAAGC,WAAW,CAAC,IAAMpB,QAAQ,CAACqB,IAAI,EAAIA,IAAI,CAAG,CAAC,CAAC,CAAE,IAAI,CAAC,CACpE,MAAO,IAAMC,aAAa,CAACH,QAAQ,CAAC,CACtC,CACF,CAAC,CAAE,CAAClB,WAAW,CAAEE,aAAa,CAAEE,mBAAmB,CAAC,CAAC,CAErD;AACA1C,SAAS,CAAC,IAAM,CACd,GAAI,CAAC0C,mBAAmB,CAAE,OAE1B,GAAIZ,YAAY,CAACkB,MAAM,GAAK,CAAC,CAAE,CAC7B,KAAM,CAACY,KAAK,CAAEC,MAAM,CAAC,CAAG/B,YAAY,CACpC,GAAIF,KAAK,CAACgC,KAAK,CAAC,GAAKhC,KAAK,CAACiC,MAAM,CAAC,CAAE,CAClC5B,eAAe,CAACyB,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEE,KAAK,CAAEC,MAAM,CAAC,CAAC,CACjD9B,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,IAAM,CACL+B,UAAU,CAAC,IAAM/B,eAAe,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC7C,CACF,CACF,CAAC,CAAE,CAACD,YAAY,CAAEF,KAAK,CAAEc,mBAAmB,CAAC,CAAC,CAE9C,KAAM,CAAAqB,SAAS,CAAG9D,WAAW,CAAC,MAAO+D,KAAa,CAAEC,IAAY,GAAK,CACnE,GAAI,CAAChD,IAAI,CAAE,CACTiD,OAAO,CAACC,KAAK,CAAC,mCAAmC,CAAC,CAClD,OACF,CAEAD,OAAO,CAACE,GAAG,CAAC,kBAAkB,CAAE,CAC9BC,MAAM,CAAEpD,IAAI,CAACqD,GAAG,CAChBC,QAAQ,CAAEtD,IAAI,CAACuD,WAAW,CAC1BR,KAAK,CACLC,IAAI,CACJlD,UAAU,CACVC,MACF,CAAC,CAAC,CAEF,GAAI,CACF,KAAM,CAAAyD,MAAM,CAAG,KAAM,CAAArE,MAAM,CAACD,UAAU,CAACD,EAAE,CAAE,QAAQ,CAAC,CAAE,CACpDmE,MAAM,CAAEpD,IAAI,CAACqD,GAAG,CAChBC,QAAQ,CAAEtD,IAAI,CAACuD,WAAW,EAAI,WAAW,CACzCR,KAAK,CACLC,IAAI,CACJlD,UAAU,CACVC,MAAM,CACN0D,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CAAC,CACFT,OAAO,CAACE,GAAG,CAAC,qCAAqC,CAAEK,MAAM,CAACG,EAAE,CAAC,CAC/D,CAAE,MAAOT,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACF,CAAC,CAAE,CAAClD,IAAI,CAAEF,UAAU,CAAEC,MAAM,CAAC,CAAC,CAE9B;AACAhB,SAAS,CAAC,IAAM,CACd,GAAI,CAAC0C,mBAAmB,CAAE,OAE1B,GAAIV,YAAY,CAACgB,MAAM,GAAKrB,UAAU,EAAIA,UAAU,CAAG,CAAC,CAAE,CACxDc,gBAAgB,CAAC,IAAI,CAAC,CACtB,KAAM,CAAAuB,KAAK,CAAGX,IAAI,CAACwB,GAAG,CAAC,IAAI,CAAG3C,KAAK,CAAG,EAAE,CAAGE,KAAK,CAAE,GAAG,CAAC,CAEtD,GAAInB,IAAI,EAAIC,OAAO,CAAE,CACnBA,OAAO,CAAC8C,KAAK,CAAE5B,KAAK,CAAC,CACrB2B,SAAS,CAACC,KAAK,CAAE5B,KAAK,CAAC,CACzB,CAEA,GAAIjB,UAAU,CAAE,CACdA,UAAU,CAAC,CAAC,CACd,CACF,CACF,CAAC,CAAE,CAACa,YAAY,CAACgB,MAAM,CAAErB,UAAU,CAAEO,KAAK,CAAEE,KAAK,CAAEnB,IAAI,CAAEC,OAAO,CAAEC,UAAU,CAAE4C,SAAS,CAAErB,mBAAmB,CAAC,CAAC,CAE9G,KAAM,CAAAoC,eAAe,CAAIC,KAAa,EAAK,CACzC,GAAI,CAACrC,mBAAmB,CAAE,OAE1B,GAAI,CAACJ,WAAW,CAAEC,cAAc,CAAC,IAAI,CAAC,CAEtC,GAAIT,YAAY,CAACkB,MAAM,GAAK,CAAC,EAAIlB,YAAY,CAACkD,QAAQ,CAACD,KAAK,CAAC,EAAI/C,YAAY,CAACgD,QAAQ,CAACD,KAAK,CAAC,CAAE,CAC7F,OACF,CAEAhD,eAAe,CAAC2B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEqB,KAAK,CAAC,CAAC,CACzC5C,QAAQ,CAACuB,IAAI,EAAIA,IAAI,CAAG,CAAC,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAuB,SAAS,CAAGA,CAAA,GAAM,CACtB,GAAI,CAACvC,mBAAmB,CAAE,OAE1B,KAAM,CAAAG,OAAO,CAAGC,KAAK,CAACC,IAAI,CAAC,CAAEC,MAAM,CAAErB,UAAU,CAAG,CAAE,CAAC,CAAE,CAACsB,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAAG,CAAC,CAAC,CACvE,KAAM,CAAAC,aAAa,CAAG,CAAC,GAAGN,OAAO,CAAE,GAAGA,OAAO,CAAC,CAACO,IAAI,CAAC,IAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAC9EzB,QAAQ,CAACsB,aAAa,CAAC,CACvBpB,eAAe,CAAC,EAAE,CAAC,CACnBE,eAAe,CAAC,EAAE,CAAC,CACnBE,QAAQ,CAAC,CAAC,CAAC,CACXE,QAAQ,CAAC,CAAC,CAAC,CACXE,cAAc,CAAC,KAAK,CAAC,CACrBE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAED;AACA,KAAM,CAAAyC,SAA8B,CAAG,CACrC,CAAC,aAAa,EAAU1D,QAC1B,CAAC,CACF;AACC;AAEA,mBACEhB,KAAA,QAAK2E,SAAS,CAAE7E,MAAM,CAAC8E,SAAU,CAAAC,QAAA,eAC/B7E,KAAA,OAAI2E,SAAS,CAAE7E,MAAM,CAACgF,UAAW,CAAAD,QAAA,EAAC,iBACjB,CAACtE,UAAU,CAACwE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGzE,UAAU,CAAC0E,KAAK,CAAC,CAAC,CAAC,CAAC,IAAE,CAACjE,QAAQ,CAAC,GAAC,CAACA,QAAQ,CAAC,MAAI,CAACR,MAAM,CAACuE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGxE,MAAM,CAACyE,KAAK,CAAC,CAAC,CAAC,CAAC,SACxJ,EAAI,CAAC,CAEJ,CAAC/C,mBAAmB,cACnB;AACAlC,KAAA,QAAK2E,SAAS,CAAE7E,MAAM,CAACoF,UAAW,CAAAL,QAAA,eAChC3E,IAAA,QAAKyE,SAAS,CAAE7E,MAAM,CAACqF,cAAe,CAAAN,QAAA,CAAC,cAAE,CAAK,CAAC,cAC/C3E,IAAA,OAAIyE,SAAS,CAAE7E,MAAM,CAACsF,eAAgB,CAAAP,QAAA,CAAC,cAAY,CAAI,CAAC,cACxD7E,KAAA,MAAG2E,SAAS,CAAE7E,MAAM,CAACuF,cAAe,CAAAR,QAAA,EAAC,MAC/B,cAAA3E,IAAA,WAAA2E,QAAA,CAASrE,MAAM,CAACuE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGxE,MAAM,CAACyE,KAAK,CAAC,CAAC,CAAC,CAAS,CAAC,gCACzE,EAAG,CAAC,cACJjF,KAAA,MAAG2E,SAAS,CAAE7E,MAAM,CAACwF,iBAAkB,CAAAT,QAAA,EAAC,gBACxB,cAAA3E,IAAA,WAAA2E,QAAA,CAAQ,MAAI,CAAQ,CAAC,4BACrC,EAAG,CAAC,EACD,CAAC,cAEN;AACA7E,KAAA,CAAAI,SAAA,EAAAyE,QAAA,eACE3E,IAAA,QACE;AACAyE,SAAS,IAAAY,MAAA,CAAKzF,MAAM,CAAC0F,UAAU,MAAAD,MAAA,CAAIzF,MAAM,CAACmB,eAAe,CAAC,EAAI,EAAE,CAAG,CACnEwE,KAAK,CAAEf,SAAU,CACjBgB,IAAI,CAAC,MAAM,CACX,4BAAAH,MAAA,CAA2BhF,UAAU,CAAG,CAAAsE,QAAA,CAEvCzD,KAAK,CAACuE,GAAG,CAAC,CAACC,IAAI,CAAElD,CAAC,GAAK,CACtB,KAAM,CAAAmD,SAAS,CAAGvE,YAAY,CAACkD,QAAQ,CAAC9B,CAAC,CAAC,EAAIlB,YAAY,CAACgD,QAAQ,CAAC9B,CAAC,CAAC,CACtE,KAAM,CAAAoD,SAAS,CAAGtE,YAAY,CAACgD,QAAQ,CAAC9B,CAAC,CAAC,CAC1C,KAAM,CAAAqD,WAAW,IAAAR,MAAA,CAAMzF,MAAM,CAAC8F,IAAI,MAAAL,MAAA,CAAIM,SAAS,CAAG/F,MAAM,CAACkG,OAAO,CAAG,EAAE,MAAAT,MAAA,CAAIO,SAAS,CAAGhG,MAAM,CAACmG,OAAO,CAAG,EAAE,CAAE,CAE1G,mBACE/F,IAAA,QAEEyE,SAAS,CAAEoB,WAAY,CACvBG,OAAO,CAAEA,CAAA,GAAM5B,eAAe,CAAC5B,CAAC,CAAE,CAClCgD,IAAI,CAAC,QAAQ,CACbS,QAAQ,CAAE,CAAE,CACZC,SAAS,CAAGC,CAAC,EAAK,CAAE,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,EAAID,CAAC,CAACC,GAAG,GAAK,GAAG,CAAEhC,eAAe,CAAC5B,CAAC,CAAC,CAAE,CAAE,CAAAmC,QAAA,cAElF7E,KAAA,QAAK2E,SAAS,CAAE7E,MAAM,CAACyG,SAAU,CAAA1B,QAAA,eAC/B3E,IAAA,QAAKyE,SAAS,CAAE7E,MAAM,CAAC0G,SAAU,CAAE,CAAC,cACpCtG,IAAA,QAAKyE,SAAS,CAAE7E,MAAM,CAAC2G,QAAS,CAAA5B,QAAA,CAAEe,IAAI,GAAK,CAAC,CAAGA,IAAI,CAAG,EAAE,CAAM,CAAC,EAC5D,CAAC,EAVDlD,CAWF,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,cAEN1C,KAAA,QAAKyF,KAAK,CAAE,CAAEiB,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAA9B,QAAA,eACrD7E,KAAA,MAAA6E,QAAA,EAAG,SAAO,CAACnD,KAAK,CAAC,WAAS,CAACE,KAAK,CAAC,GAAC,EAAG,CAAC,cACtC1B,IAAA,WAAQgG,OAAO,CAAEzB,SAAU,CAACE,SAAS,CAAE7E,MAAM,CAAC8G,GAAI,CAAA/B,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACjE,CAAC,CAEL7C,aAAa,eACZhC,KAAA,QAAK2E,SAAS,CAAE7E,MAAM,CAAC+G,WAAY,CAAAhC,QAAA,EAAC,4DACc,CAACnD,KAAK,CAAC,aAAW,CAACE,KAAK,CAAC,WACzE,CAACnB,IAAI,cACHT,KAAA,MAAA6E,QAAA,EAAG,SAAO,CAAChC,IAAI,CAACwB,GAAG,CAAC,IAAI,CAAG3C,KAAK,CAAG,EAAE,CAAGE,KAAK,CAAE,GAAG,CAAC,CAAC,0BAAwB,EAAG,CAAC,cAEhF5B,KAAA,QAAA6E,QAAA,eACE7E,KAAA,MAAA6E,QAAA,EAAG,SAAO,CAAChC,IAAI,CAACwB,GAAG,CAAC,IAAI,CAAG3C,KAAK,CAAG,EAAE,CAAGE,KAAK,CAAE,GAAG,CAAC,EAAI,CAAC,CACvD,CAAC/B,qBAAqB,CAAC,CAAC,eACvBK,IAAA,MAAGyE,SAAS,CAAE7E,MAAM,CAACgH,SAAU,CAAAjC,QAAA,CAAC,+EAEhC,CAAG,CACJ,EACE,CACN,EACE,CACN,EACD,CACH,EACE,CAAC,CAEV,CAEA,cAAe,CAAAxE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}