{"ast":null,"code":"import React,{useEffect,useState}from'react';import{auth,db,realtimeDb}from'./firebase';import{collection,query,where,getDocs}from'firebase/firestore';import{ref,onValue}from'firebase/database';import{onAuthStateChanged,signInWithPopup,signInWithRedirect,getRedirectResult,GoogleAuthProvider,signOut,setPersistence,browserLocalPersistence}from'firebase/auth';import SinglePlayerGame from'./SinglePlayerGame';import MultiplayerLobby from'./MultiplayerLobby';import MultiplayerGame from'./MultiplayerGame';import{isFacebookInstantGame}from'./platform';import{platformAuth}from'./platformAuth';import{facebookAds}from'./facebookAds';import styles from'./App.module.scss';// Version: 1.0.2 - Added Facebook Instant Games support\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[platformUser,setPlatformUser]=useState(null);const[gameMode,setGameMode]=useState('menu');const[currentRoomId,setCurrentRoomId]=useState(null);const[currentRoomDifficulty,setCurrentRoomDifficulty]=useState('easy');const[currentRoomLayout,setCurrentRoomLayout]=useState('grid');const[authLoading,setAuthLoading]=useState(true);const[platformLoading,setPlatformLoading]=useState(true);const[statusMessage,setStatusMessage]=useState(null);const[userStats,setUserStats]=useState({singlePlayerPoints:0,multiplayerPoints:0});// Initialize Facebook Instant Games if on that platform\nuseEffect(()=>{const initPlatform=async()=>{console.log('Platform init starting...');const isFB=isFacebookInstantGame();console.log('isFacebookInstantGame():',isFB);console.log('window.FBInstant:',typeof window.FBInstant);if(isFB){console.log('Detected Facebook platform - initializing...');try{await window.FBInstant.initializeAsync();// Initialize Facebook ads\nawait facebookAds.initialize();// Start the game (removes loading screen) - MUST be called before getName()\nawait window.FBInstant.startGameAsync();// Get Facebook player info AFTER startGameAsync\nconst fbUser=await platformAuth.fromFacebookPlayer();if(fbUser){setPlatformUser(fbUser);setStatusMessage({text:\"Welcome \".concat(fbUser.displayName,\"!\"),tone:'success'});}console.log('Facebook init complete - setting platformLoading to false');setPlatformLoading(false);}catch(error){console.log('Facebook init error:',error);setStatusMessage({text:\"Facebook Instant Games initialization failed: \".concat(error.message),tone:'error'});setPlatformLoading(false);}}else{// Web platform - no special initialization needed\nconsole.log('Web platform detected - setting platformLoading to false');setPlatformLoading(false);}};initPlatform();},[]);useEffect(()=>{let unsubscribe=null;const initAuth=async()=>{try{const urlParams=new URLSearchParams(window.location.search);const hasOAuthParams=['code','state','error'].some(key=>urlParams.has(key));await setPersistence(auth,browserLocalPersistence);try{const result=await getRedirectResult(auth);if(result){setUser(result.user);setStatusMessage({text:\"Signed in as \".concat(result.user.displayName||result.user.email),tone:'success'});setAuthLoading(false);}else if(hasOAuthParams){setStatusMessage({text:'We could not complete Google sign-in. Please try again.',tone:'error'});}}catch(redirectError){setStatusMessage({text:\"Sign-in redirect failed: \".concat(redirectError.message),tone:'error'});}unsubscribe=onAuthStateChanged(auth,currentUser=>{if(currentUser){setUser(currentUser);setStatusMessage({text:\"Signed in as \".concat(currentUser.displayName||currentUser.email),tone:'success'});}else{setUser(null);setStatusMessage(prev=>(prev===null||prev===void 0?void 0:prev.tone)==='error'?prev:null);}setAuthLoading(false);});}catch(error){setStatusMessage({text:\"Auth initialization failed: \".concat(error.message),tone:'error'});setAuthLoading(false);}};initAuth();return()=>{if(typeof unsubscribe==='function'){unsubscribe();}};},[]);// Fetch user stats\nuseEffect(()=>{const currentUserId=(platformUser===null||platformUser===void 0?void 0:platformUser.uid)||(user===null||user===void 0?void 0:user.uid);if(!currentUserId){setUserStats({singlePlayerPoints:0,multiplayerPoints:0});return;}const fetchStats=async()=>{try{// Get single player points from Firestore\nconst scoresRef=collection(db,'scores');const q=query(scoresRef,where('userId','==',currentUserId));const snapshot=await getDocs(q);const singlePlayerPoints=snapshot.docs.reduce((sum,doc)=>sum+(doc.data().score||0),0);// Get multiplayer points from Realtime Database\nconst userStatsRef=ref(realtimeDb,\"userStats/\".concat(currentUserId));onValue(userStatsRef,snapshot=>{const data=snapshot.val();const multiplayerPoints=(data===null||data===void 0?void 0:data.multiplayerPoints)||0;setUserStats({singlePlayerPoints,multiplayerPoints});});}catch(error){}};fetchStats();},[user,platformUser]);const signInWithGoogle=async()=>{const provider=new GoogleAuthProvider();provider.setCustomParameters({prompt:'select_account'});const isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);try{await setPersistence(auth,browserLocalPersistence);setStatusMessage({text:'Opening Google sign-inâ€¦',tone:'info'});try{await signInWithPopup(auth,provider);}catch(popupError){const fallbackErrors=['auth/popup-blocked','auth/popup-closed-by-user','auth/cancelled-popup-request','auth/operation-not-supported-in-this-environment'];const shouldFallbackToRedirect=isMobile||fallbackErrors.includes(popupError.code);if(!shouldFallbackToRedirect){throw popupError;}await signInWithRedirect(auth,provider);}}catch(error){setStatusMessage({text:error.code==='auth/unauthorized-domain'?'Domain not authorized for Google sign-in. Please add crazypuzzlecrazy.web.app in Firebase Console.':\"Sign in failed: \".concat(error.message),tone:'error'});}};const handleSignOut=async()=>{try{await signOut(auth);setStatusMessage({text:'Signed out successfully.',tone:'info'});}catch(error){}};const handleJoinRoom=(roomId,roomDifficulty,roomLayout)=>{setCurrentRoomId(roomId);setCurrentRoomDifficulty(roomDifficulty);setCurrentRoomLayout(roomLayout);setGameMode('multiplayer-game');};const handleLeaveRoom=()=>{setCurrentRoomId(null);setGameMode('multiplayer-lobby');};// Show loading while checking auth state or platform\nconsole.log('Render check - authLoading:',authLoading,'platformLoading:',platformLoading);if(authLoading||platformLoading){return/*#__PURE__*/_jsx(\"div\",{className:styles.appBg,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.menuContainer,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.mainTitle,children:\"\\uD83E\\uDDE9 CrazyPuzzle\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})});}// Get the current active user (Facebook or Google)\nconst activeUser=platformUser||(user?{uid:user.uid,displayName:user.displayName,photoURL:user.photoURL,platform:'web'}:null);// Menu view\nif(gameMode==='menu'){return/*#__PURE__*/_jsx(\"div\",{className:styles.appBg,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.menuContainer,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.mainTitle,children:\"\\uD83E\\uDDE9 CrazyPuzzle\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.subtitle,children:\"Test your memory and compete with friends!\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.authSection,children:[activeUser?/*#__PURE__*/_jsxs(\"div\",{className:styles.userWelcome,children:[/*#__PURE__*/_jsx(\"img\",{src:activeUser.photoURL||'',alt:\"Avatar\",className:styles.userAvatar}),/*#__PURE__*/_jsxs(\"div\",{className:styles.userInfo,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.userName,children:[\"Welcome, \",activeUser.displayName,\"!\"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.userPoints,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.pointsBadge,children:[\"\\uD83C\\uDFAF Single: \",userStats.singlePlayerPoints,\" pts\"]}),/*#__PURE__*/_jsxs(\"span\",{className:styles.pointsBadge,children:[\"\\uD83D\\uDC65 Multi: \",userStats.multiplayerPoints,\" pts\"]})]})]}),!isFacebookInstantGame()&&/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOut,className:styles.signOutBtn,children:\"Sign Out\"})]}):!isFacebookInstantGame()&&/*#__PURE__*/_jsxs(\"div\",{className:styles.guestInfo,children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83C\\uDFAE Play as guest or sign in for more features\"}),/*#__PURE__*/_jsx(\"button\",{onClick:signInWithGoogle,className:styles.signInBtn,children:\"Sign in with Google\"})]}),statusMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.statusMessage,\" \").concat(statusMessage.tone==='success'?styles.statusSuccess:statusMessage.tone==='error'?styles.statusError:styles.statusInfo),children:statusMessage.text})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.modeSelection,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setGameMode('singleplayer'),className:styles.modeBtn,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.modeIcon,children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.modeTitle,children:\"Single Player\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.modeDesc,children:\"Play solo and beat your best time\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{if(!activeUser){setStatusMessage({text:'Please sign in to play multiplayer.',tone:'info'});return;}setGameMode('multiplayer-lobby');},className:styles.modeBtn,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.modeIcon,children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.modeTitle,children:\"Multiplayer\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.modeDesc,children:\"Compete with friends in real-time\"}),!activeUser&&!isFacebookInstantGame()&&/*#__PURE__*/_jsx(\"span\",{className:styles.requiresAuth,children:\"Requires sign in\"})]})]})]})});}// Multiplayer lobby view\nif(gameMode==='multiplayer-lobby'&&activeUser){// Convert platform user to User-like object for compatibility\nconst compatUser=user||{uid:activeUser.uid,displayName:activeUser.displayName,email:null,photoURL:activeUser.photoURL,emailVerified:false,isAnonymous:false,metadata:{},providerData:[],refreshToken:'',tenantId:null,delete:async()=>{},getIdToken:async()=>'',getIdTokenResult:async()=>({}),reload:async()=>{},toJSON:()=>({}),phoneNumber:null,providerId:'facebook.com'};return/*#__PURE__*/_jsx(\"div\",{className:styles.appBg,children:/*#__PURE__*/_jsx(MultiplayerLobby,{user:compatUser,onJoinRoom:handleJoinRoom,onBackToSinglePlayer:()=>setGameMode('menu')})});}// Multiplayer game view\nif(gameMode==='multiplayer-game'&&activeUser&&currentRoomId){// Convert platform user to User-like object for compatibility\nconst compatUser=user||{uid:activeUser.uid,displayName:activeUser.displayName,email:null,photoURL:activeUser.photoURL,emailVerified:false,isAnonymous:false,metadata:{},providerData:[],refreshToken:'',tenantId:null,delete:async()=>{},getIdToken:async()=>'',getIdTokenResult:async()=>({}),reload:async()=>{},toJSON:()=>({}),phoneNumber:null,providerId:'facebook.com'};return/*#__PURE__*/_jsx(\"div\",{className:styles.appBg,children:/*#__PURE__*/_jsx(MultiplayerGame,{roomId:currentRoomId,user:compatUser,difficulty:currentRoomDifficulty,layout:currentRoomLayout,onLeaveRoom:handleLeaveRoom,onBackToMenu:()=>setGameMode('menu')})});}// Single player mode\nconst compatUser=user||(activeUser?{uid:activeUser.uid,displayName:activeUser.displayName,email:null,photoURL:activeUser.photoURL,emailVerified:false,isAnonymous:false,metadata:{},providerData:[],refreshToken:'',tenantId:null,delete:async()=>{},getIdToken:async()=>'',getIdTokenResult:async()=>({}),reload:async()=>{},toJSON:()=>({}),phoneNumber:null,providerId:activeUser.platform==='facebook'?'facebook.com':'google.com'}:null);return/*#__PURE__*/_jsx(SinglePlayerGame,{user:compatUser,onBackToMenu:()=>setGameMode('menu'),onSignInWithGoogle:signInWithGoogle,onSignOut:handleSignOut});}export default App;","map":{"version":3,"names":["React","useEffect","useState","auth","db","realtimeDb","collection","query","where","getDocs","ref","onValue","onAuthStateChanged","signInWithPopup","signInWithRedirect","getRedirectResult","GoogleAuthProvider","signOut","setPersistence","browserLocalPersistence","SinglePlayerGame","MultiplayerLobby","MultiplayerGame","isFacebookInstantGame","platformAuth","facebookAds","styles","jsx","_jsx","jsxs","_jsxs","App","user","setUser","platformUser","setPlatformUser","gameMode","setGameMode","currentRoomId","setCurrentRoomId","currentRoomDifficulty","setCurrentRoomDifficulty","currentRoomLayout","setCurrentRoomLayout","authLoading","setAuthLoading","platformLoading","setPlatformLoading","statusMessage","setStatusMessage","userStats","setUserStats","singlePlayerPoints","multiplayerPoints","initPlatform","console","log","isFB","window","FBInstant","initializeAsync","initialize","startGameAsync","fbUser","fromFacebookPlayer","text","concat","displayName","tone","error","message","unsubscribe","initAuth","urlParams","URLSearchParams","location","search","hasOAuthParams","some","key","has","result","email","redirectError","currentUser","prev","currentUserId","uid","fetchStats","scoresRef","q","snapshot","docs","reduce","sum","doc","data","score","userStatsRef","val","signInWithGoogle","provider","setCustomParameters","prompt","isMobile","test","navigator","userAgent","popupError","fallbackErrors","shouldFallbackToRedirect","includes","code","handleSignOut","handleJoinRoom","roomId","roomDifficulty","roomLayout","handleLeaveRoom","className","appBg","children","menuContainer","mainTitle","activeUser","photoURL","platform","subtitle","authSection","userWelcome","src","alt","userAvatar","userInfo","userName","userPoints","pointsBadge","onClick","signOutBtn","guestInfo","signInBtn","statusSuccess","statusError","statusInfo","modeSelection","modeBtn","modeIcon","modeTitle","modeDesc","requiresAuth","compatUser","emailVerified","isAnonymous","metadata","providerData","refreshToken","tenantId","delete","getIdToken","getIdTokenResult","reload","toJSON","phoneNumber","providerId","onJoinRoom","onBackToSinglePlayer","difficulty","layout","onLeaveRoom","onBackToMenu","onSignInWithGoogle","onSignOut"],"sources":["C:/Users/MARCE/source/repos/CrazyPuzzle/web/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { User } from 'firebase/auth';\r\nimport { auth, db, realtimeDb } from './firebase';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { ref, onValue } from 'firebase/database';\r\nimport { onAuthStateChanged, signInWithPopup, signInWithRedirect, getRedirectResult, GoogleAuthProvider, signOut, setPersistence, browserLocalPersistence } from 'firebase/auth';\r\nimport SinglePlayerGame from './SinglePlayerGame';\r\nimport MultiplayerLobby from './MultiplayerLobby';\r\nimport MultiplayerGame from './MultiplayerGame';\r\nimport { Difficulty, Layout } from './DifficultySelector';\r\nimport { isFacebookInstantGame } from './platform';\r\nimport { platformAuth, PlatformUser } from './platformAuth';\r\nimport { facebookAds } from './facebookAds';\r\nimport styles from './App.module.scss';\r\n\r\n// Version: 1.0.2 - Added Facebook Instant Games support\r\n\r\ntype GameMode = 'menu' | 'singleplayer' | 'multiplayer-lobby' | 'multiplayer-game';\r\ntype StatusTone = 'info' | 'success' | 'error';\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [platformUser, setPlatformUser] = useState<PlatformUser | null>(null);\r\n  const [gameMode, setGameMode] = useState<GameMode>('menu');\r\n  const [currentRoomId, setCurrentRoomId] = useState<string | null>(null);\r\n  const [currentRoomDifficulty, setCurrentRoomDifficulty] = useState<Difficulty>('easy');\r\n  const [currentRoomLayout, setCurrentRoomLayout] = useState<Layout>('grid');\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n  const [platformLoading, setPlatformLoading] = useState(true);\r\n  const [statusMessage, setStatusMessage] = useState<{ text: string; tone: StatusTone } | null>(null);\r\n  const [userStats, setUserStats] = useState<{ singlePlayerPoints: number; multiplayerPoints: number }>({ singlePlayerPoints: 0, multiplayerPoints: 0 });\r\n\r\n  // Initialize Facebook Instant Games if on that platform\r\n  useEffect(() => {\r\n    const initPlatform = async () => {\r\n      console.log('Platform init starting...');\r\n      const isFB = isFacebookInstantGame();\r\n      console.log('isFacebookInstantGame():', isFB);\r\n      console.log('window.FBInstant:', typeof window.FBInstant);\r\n      \r\n      if (isFB) {\r\n        console.log('Detected Facebook platform - initializing...');\r\n        try {\r\n          await window.FBInstant!.initializeAsync();\r\n          \r\n          // Initialize Facebook ads\r\n          await facebookAds.initialize();\r\n          \r\n          // Start the game (removes loading screen) - MUST be called before getName()\r\n          await window.FBInstant!.startGameAsync();\r\n          \r\n          // Get Facebook player info AFTER startGameAsync\r\n          const fbUser = await platformAuth.fromFacebookPlayer();\r\n          if (fbUser) {\r\n            setPlatformUser(fbUser);\r\n            setStatusMessage({\r\n              text: `Welcome ${fbUser.displayName}!`,\r\n              tone: 'success'\r\n            });\r\n          }\r\n          \r\n          console.log('Facebook init complete - setting platformLoading to false');\r\n          setPlatformLoading(false);\r\n        } catch (error: any) {\r\n          console.log('Facebook init error:', error);\r\n          setStatusMessage({\r\n            text: `Facebook Instant Games initialization failed: ${error.message}`,\r\n            tone: 'error'\r\n          });\r\n          setPlatformLoading(false);\r\n        }\r\n      } else {\r\n        // Web platform - no special initialization needed\r\n        console.log('Web platform detected - setting platformLoading to false');\r\n        setPlatformLoading(false);\r\n      }\r\n    };\r\n\r\n    initPlatform();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let unsubscribe: (() => void) | null = null;\r\n    const initAuth = async () => {\r\n      try {\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const hasOAuthParams = ['code', 'state', 'error'].some((key) => urlParams.has(key));\r\n        await setPersistence(auth, browserLocalPersistence);\r\n        try {\r\n          const result = await getRedirectResult(auth);\r\n          if (result) {\r\n            setUser(result.user);\r\n            setStatusMessage({\r\n              text: `Signed in as ${result.user.displayName || result.user.email}`,\r\n              tone: 'success'\r\n            });\r\n            setAuthLoading(false);\r\n          } else if (hasOAuthParams) {\r\n            setStatusMessage({\r\n              text: 'We could not complete Google sign-in. Please try again.',\r\n              tone: 'error'\r\n            });\r\n          }\r\n        } catch (redirectError: any) {\r\n          setStatusMessage({\r\n            text: `Sign-in redirect failed: ${redirectError.message}`,\r\n            tone: 'error'\r\n          });\r\n        }\r\n        unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n          if (currentUser) {\r\n            setUser(currentUser);\r\n            setStatusMessage({\r\n              text: `Signed in as ${currentUser.displayName || currentUser.email}`,\r\n              tone: 'success'\r\n            });\r\n          } else {\r\n            setUser(null);\r\n            setStatusMessage((prev) => (prev?.tone === 'error' ? prev : null));\r\n          }\r\n          setAuthLoading(false);\r\n        });\r\n      } catch (error: any) {\r\n        setStatusMessage({\r\n          text: `Auth initialization failed: ${error.message}`,\r\n          tone: 'error'\r\n        });\r\n        setAuthLoading(false);\r\n      }\r\n    };\r\n    initAuth();\r\n    return () => {\r\n      if (typeof unsubscribe === 'function') {\r\n        unsubscribe();\r\n      }\r\n    };\r\n  }, []);\r\n  // Fetch user stats\r\n  useEffect(() => {\r\n    const currentUserId = platformUser?.uid || user?.uid;\r\n    \r\n    if (!currentUserId) {\r\n      setUserStats({ singlePlayerPoints: 0, multiplayerPoints: 0 });\r\n      return;\r\n    }\r\n\r\n    const fetchStats = async () => {\r\n      try {\r\n        // Get single player points from Firestore\r\n        const scoresRef = collection(db, 'scores');\r\n        const q = query(scoresRef, where('userId', '==', currentUserId));\r\n        const snapshot = await getDocs(q);\r\n        const singlePlayerPoints = snapshot.docs.reduce((sum, doc) => sum + (doc.data().score || 0), 0);\r\n        // Get multiplayer points from Realtime Database\r\n        const userStatsRef = ref(realtimeDb, `userStats/${currentUserId}`);\r\n        onValue(userStatsRef, (snapshot) => {\r\n          const data = snapshot.val();\r\n          const multiplayerPoints = data?.multiplayerPoints || 0;\r\n          setUserStats({ singlePlayerPoints, multiplayerPoints });\r\n        });\r\n      } catch (error) {\r\n      }\r\n    };\r\n    fetchStats();\r\n  }, [user, platformUser]);\r\n  const signInWithGoogle = async () => {\r\n    const provider = new GoogleAuthProvider();\r\n    provider.setCustomParameters({ prompt: 'select_account' });\r\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n    try {\r\n      await setPersistence(auth, browserLocalPersistence);\r\n      setStatusMessage({ text: 'Opening Google sign-inâ€¦', tone: 'info' });\r\n      try {\r\n        await signInWithPopup(auth, provider);\r\n      } catch (popupError: any) {\r\n        const fallbackErrors = ['auth/popup-blocked', 'auth/popup-closed-by-user', 'auth/cancelled-popup-request', 'auth/operation-not-supported-in-this-environment'];\r\n        const shouldFallbackToRedirect = isMobile || fallbackErrors.includes(popupError.code);\r\n        if (!shouldFallbackToRedirect) {\r\n          throw popupError;\r\n        }\r\n        await signInWithRedirect(auth, provider);\r\n      }\r\n    } catch (error: any) {\r\n      setStatusMessage({\r\n        text: error.code === 'auth/unauthorized-domain'\r\n          ? 'Domain not authorized for Google sign-in. Please add crazypuzzlecrazy.web.app in Firebase Console.'\r\n          : `Sign in failed: ${error.message}`,\r\n        tone: 'error'\r\n      });\r\n    }\r\n  };\r\n  const handleSignOut = async () => {\r\n    try {\r\n      await signOut(auth);\r\n      setStatusMessage({ text: 'Signed out successfully.', tone: 'info' });\r\n    } catch (error) {\r\n    }\r\n  };\r\n  const handleJoinRoom = (roomId: string, roomDifficulty: Difficulty, roomLayout: Layout) => {\r\n    setCurrentRoomId(roomId);\r\n    setCurrentRoomDifficulty(roomDifficulty);\r\n    setCurrentRoomLayout(roomLayout);\r\n    setGameMode('multiplayer-game');\r\n  };\r\n  const handleLeaveRoom = () => {\r\n    setCurrentRoomId(null);\r\n    setGameMode('multiplayer-lobby');\r\n  };\r\n  // Show loading while checking auth state or platform\r\n  console.log('Render check - authLoading:', authLoading, 'platformLoading:', platformLoading);\r\n  if (authLoading || platformLoading) {\r\n    return (\r\n      <div className={styles.appBg}>\r\n        <div className={styles.menuContainer}>\r\n          <h1 className={styles.mainTitle}>ðŸ§© CrazyPuzzle</h1>\r\n          <p>Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Get the current active user (Facebook or Google)\r\n  const activeUser = platformUser || (user ? {\r\n    uid: user.uid,\r\n    displayName: user.displayName,\r\n    photoURL: user.photoURL,\r\n    platform: 'web' as const\r\n  } : null);\r\n\r\n  // Menu view\r\n  if (gameMode === 'menu') {\r\n    return (\r\n      <div className={styles.appBg}>\r\n        <div className={styles.menuContainer}>\r\n          <h1 className={styles.mainTitle}>ðŸ§© CrazyPuzzle</h1>\r\n          <p className={styles.subtitle}>Test your memory and compete with friends!</p>\r\n          <div className={styles.authSection}>\r\n            {activeUser ? (\r\n              <div className={styles.userWelcome}>\r\n                <img src={activeUser.photoURL || ''} alt=\"Avatar\" className={styles.userAvatar} />\r\n                <div className={styles.userInfo}>\r\n                  <span className={styles.userName}>Welcome, {activeUser.displayName}!</span>\r\n                  <div className={styles.userPoints}>\r\n                    <span className={styles.pointsBadge}>\r\n                      ðŸŽ¯ Single: {userStats.singlePlayerPoints} pts\r\n                    </span>\r\n                    <span className={styles.pointsBadge}>\r\n                      ðŸ‘¥ Multi: {userStats.multiplayerPoints} pts\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {!isFacebookInstantGame() && (\r\n                  <button onClick={handleSignOut} className={styles.signOutBtn}>Sign Out</button>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              !isFacebookInstantGame() && (\r\n                <div className={styles.guestInfo}>\r\n                  <p>ðŸŽ® Play as guest or sign in for more features</p>\r\n                  <button onClick={signInWithGoogle} className={styles.signInBtn}>\r\n                    Sign in with Google\r\n                  </button>\r\n                </div>\r\n              )\r\n            )}\r\n            {statusMessage && (\r\n              <div\r\n                className={`${styles.statusMessage} ${\r\n                  statusMessage.tone === 'success'\r\n                    ? styles.statusSuccess\r\n                    : statusMessage.tone === 'error'\r\n                    ? styles.statusError\r\n                    : styles.statusInfo\r\n                }`}\r\n              >\r\n                {statusMessage.text}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className={styles.modeSelection}>\r\n            <button \r\n              onClick={() => setGameMode('singleplayer')} \r\n              className={styles.modeBtn}\r\n            >\r\n              <span className={styles.modeIcon}>ðŸŽ¯</span>\r\n              <span className={styles.modeTitle}>Single Player</span>\r\n              <span className={styles.modeDesc}>Play solo and beat your best time</span>\r\n            </button>\r\n            <button \r\n              onClick={() => {\r\n                if (!activeUser) {\r\n                  setStatusMessage({ text: 'Please sign in to play multiplayer.', tone: 'info' });\r\n                  return;\r\n                }\r\n                setGameMode('multiplayer-lobby');\r\n              }} \r\n              className={styles.modeBtn}\r\n            >\r\n              <span className={styles.modeIcon}>ðŸ‘¥</span>\r\n              <span className={styles.modeTitle}>Multiplayer</span>\r\n              <span className={styles.modeDesc}>Compete with friends in real-time</span>\r\n              {!activeUser && !isFacebookInstantGame() && <span className={styles.requiresAuth}>Requires sign in</span>}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  // Multiplayer lobby view\r\n  if (gameMode === 'multiplayer-lobby' && activeUser) {\r\n    // Convert platform user to User-like object for compatibility\r\n    const compatUser = user || {\r\n      uid: activeUser.uid,\r\n      displayName: activeUser.displayName,\r\n      email: null,\r\n      photoURL: activeUser.photoURL,\r\n      emailVerified: false,\r\n      isAnonymous: false,\r\n      metadata: {},\r\n      providerData: [],\r\n      refreshToken: '',\r\n      tenantId: null,\r\n      delete: async () => {},\r\n      getIdToken: async () => '',\r\n      getIdTokenResult: async () => ({} as any),\r\n      reload: async () => {},\r\n      toJSON: () => ({}),\r\n      phoneNumber: null,\r\n      providerId: 'facebook.com'\r\n    } as any;\r\n\r\n    return (\r\n      <div className={styles.appBg}>\r\n        <MultiplayerLobby \r\n          user={compatUser}\r\n          onJoinRoom={handleJoinRoom}\r\n          onBackToSinglePlayer={() => setGameMode('menu')}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  // Multiplayer game view\r\n  if (gameMode === 'multiplayer-game' && activeUser && currentRoomId) {\r\n    // Convert platform user to User-like object for compatibility\r\n    const compatUser = user || {\r\n      uid: activeUser.uid,\r\n      displayName: activeUser.displayName,\r\n      email: null,\r\n      photoURL: activeUser.photoURL,\r\n      emailVerified: false,\r\n      isAnonymous: false,\r\n      metadata: {},\r\n      providerData: [],\r\n      refreshToken: '',\r\n      tenantId: null,\r\n      delete: async () => {},\r\n      getIdToken: async () => '',\r\n      getIdTokenResult: async () => ({} as any),\r\n      reload: async () => {},\r\n      toJSON: () => ({}),\r\n      phoneNumber: null,\r\n      providerId: 'facebook.com'\r\n    } as any;\r\n\r\n    return (\r\n      <div className={styles.appBg}>\r\n        <MultiplayerGame \r\n          roomId={currentRoomId}\r\n          user={compatUser}\r\n          difficulty={currentRoomDifficulty}\r\n          layout={currentRoomLayout}\r\n          onLeaveRoom={handleLeaveRoom}\r\n          onBackToMenu={() => setGameMode('menu')}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  // Single player mode\r\n  const compatUser = user || (activeUser ? {\r\n    uid: activeUser.uid,\r\n    displayName: activeUser.displayName,\r\n    email: null,\r\n    photoURL: activeUser.photoURL,\r\n    emailVerified: false,\r\n    isAnonymous: false,\r\n    metadata: {},\r\n    providerData: [],\r\n    refreshToken: '',\r\n    tenantId: null,\r\n    delete: async () => {},\r\n    getIdToken: async () => '',\r\n    getIdTokenResult: async () => ({} as any),\r\n    reload: async () => {},\r\n    toJSON: () => ({}),\r\n    phoneNumber: null,\r\n    providerId: activeUser.platform === 'facebook' ? 'facebook.com' : 'google.com'\r\n  } as any : null);\r\n\r\n  return (\r\n    <SinglePlayerGame \r\n      user={compatUser}\r\n      onBackToMenu={() => setGameMode('menu')}\r\n      onSignInWithGoogle={signInWithGoogle}\r\n      onSignOut={handleSignOut}\r\n    />\r\n  );\r\n}\r\nexport default App;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAElD,OAASC,IAAI,CAAEC,EAAE,CAAEC,UAAU,KAAQ,YAAY,CACjD,OAASC,UAAU,CAAEC,KAAK,CAAEC,KAAK,CAAEC,OAAO,KAAQ,oBAAoB,CACtE,OAASC,GAAG,CAAEC,OAAO,KAAQ,mBAAmB,CAChD,OAASC,kBAAkB,CAAEC,eAAe,CAAEC,kBAAkB,CAAEC,iBAAiB,CAAEC,kBAAkB,CAAEC,OAAO,CAAEC,cAAc,CAAEC,uBAAuB,KAAQ,eAAe,CAChL,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CACjD,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CACjD,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAE/C,OAASC,qBAAqB,KAAQ,YAAY,CAClD,OAASC,YAAY,KAAsB,gBAAgB,CAC3D,OAASC,WAAW,KAAQ,eAAe,CAC3C,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAEtC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAKA,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAG/B,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACgC,YAAY,CAAEC,eAAe,CAAC,CAAGjC,QAAQ,CAAsB,IAAI,CAAC,CAC3E,KAAM,CAACkC,QAAQ,CAAEC,WAAW,CAAC,CAAGnC,QAAQ,CAAW,MAAM,CAAC,CAC1D,KAAM,CAACoC,aAAa,CAAEC,gBAAgB,CAAC,CAAGrC,QAAQ,CAAgB,IAAI,CAAC,CACvE,KAAM,CAACsC,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGvC,QAAQ,CAAa,MAAM,CAAC,CACtF,KAAM,CAACwC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGzC,QAAQ,CAAS,MAAM,CAAC,CAC1E,KAAM,CAAC0C,WAAW,CAAEC,cAAc,CAAC,CAAG3C,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAC4C,eAAe,CAAEC,kBAAkB,CAAC,CAAG7C,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAAC8C,aAAa,CAAEC,gBAAgB,CAAC,CAAG/C,QAAQ,CAA4C,IAAI,CAAC,CACnG,KAAM,CAACgD,SAAS,CAAEC,YAAY,CAAC,CAAGjD,QAAQ,CAA4D,CAAEkD,kBAAkB,CAAE,CAAC,CAAEC,iBAAiB,CAAE,CAAE,CAAC,CAAC,CAEtJ;AACApD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqD,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxC,KAAM,CAAAC,IAAI,CAAGlC,qBAAqB,CAAC,CAAC,CACpCgC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEC,IAAI,CAAC,CAC7CF,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAE,MAAO,CAAAE,MAAM,CAACC,SAAS,CAAC,CAEzD,GAAIF,IAAI,CAAE,CACRF,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC,CAC3D,GAAI,CACF,KAAM,CAAAE,MAAM,CAACC,SAAS,CAAEC,eAAe,CAAC,CAAC,CAEzC;AACA,KAAM,CAAAnC,WAAW,CAACoC,UAAU,CAAC,CAAC,CAE9B;AACA,KAAM,CAAAH,MAAM,CAACC,SAAS,CAAEG,cAAc,CAAC,CAAC,CAExC;AACA,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAvC,YAAY,CAACwC,kBAAkB,CAAC,CAAC,CACtD,GAAID,MAAM,CAAE,CACV5B,eAAe,CAAC4B,MAAM,CAAC,CACvBd,gBAAgB,CAAC,CACfgB,IAAI,YAAAC,MAAA,CAAaH,MAAM,CAACI,WAAW,KAAG,CACtCC,IAAI,CAAE,SACR,CAAC,CAAC,CACJ,CAEAb,OAAO,CAACC,GAAG,CAAC,2DAA2D,CAAC,CACxET,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAE,MAAOsB,KAAU,CAAE,CACnBd,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEa,KAAK,CAAC,CAC1CpB,gBAAgB,CAAC,CACfgB,IAAI,kDAAAC,MAAA,CAAmDG,KAAK,CAACC,OAAO,CAAE,CACtEF,IAAI,CAAE,OACR,CAAC,CAAC,CACFrB,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,IAAM,CACL;AACAQ,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC,CACvET,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,CAEDO,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAENrD,SAAS,CAAC,IAAM,CACd,GAAI,CAAAsE,WAAgC,CAAG,IAAI,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACF,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAC,eAAe,CAAChB,MAAM,CAACiB,QAAQ,CAACC,MAAM,CAAC,CAC7D,KAAM,CAAAC,cAAc,CAAG,CAAC,MAAM,CAAE,OAAO,CAAE,OAAO,CAAC,CAACC,IAAI,CAAEC,GAAG,EAAKN,SAAS,CAACO,GAAG,CAACD,GAAG,CAAC,CAAC,CACnF,KAAM,CAAA7D,cAAc,CAACf,IAAI,CAAEgB,uBAAuB,CAAC,CACnD,GAAI,CACF,KAAM,CAAA8D,MAAM,CAAG,KAAM,CAAAlE,iBAAiB,CAACZ,IAAI,CAAC,CAC5C,GAAI8E,MAAM,CAAE,CACVhD,OAAO,CAACgD,MAAM,CAACjD,IAAI,CAAC,CACpBiB,gBAAgB,CAAC,CACfgB,IAAI,iBAAAC,MAAA,CAAkBe,MAAM,CAACjD,IAAI,CAACmC,WAAW,EAAIc,MAAM,CAACjD,IAAI,CAACkD,KAAK,CAAE,CACpEd,IAAI,CAAE,SACR,CAAC,CAAC,CACFvB,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,IAAM,IAAIgC,cAAc,CAAE,CACzB5B,gBAAgB,CAAC,CACfgB,IAAI,CAAE,yDAAyD,CAC/DG,IAAI,CAAE,OACR,CAAC,CAAC,CACJ,CACF,CAAE,MAAOe,aAAkB,CAAE,CAC3BlC,gBAAgB,CAAC,CACfgB,IAAI,6BAAAC,MAAA,CAA8BiB,aAAa,CAACb,OAAO,CAAE,CACzDF,IAAI,CAAE,OACR,CAAC,CAAC,CACJ,CACAG,WAAW,CAAG3D,kBAAkB,CAACT,IAAI,CAAGiF,WAAW,EAAK,CACtD,GAAIA,WAAW,CAAE,CACfnD,OAAO,CAACmD,WAAW,CAAC,CACpBnC,gBAAgB,CAAC,CACfgB,IAAI,iBAAAC,MAAA,CAAkBkB,WAAW,CAACjB,WAAW,EAAIiB,WAAW,CAACF,KAAK,CAAE,CACpEd,IAAI,CAAE,SACR,CAAC,CAAC,CACJ,CAAC,IAAM,CACLnC,OAAO,CAAC,IAAI,CAAC,CACbgB,gBAAgB,CAAEoC,IAAI,EAAM,CAAAA,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEjB,IAAI,IAAK,OAAO,CAAGiB,IAAI,CAAG,IAAK,CAAC,CACpE,CACAxC,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CACJ,CAAE,MAAOwB,KAAU,CAAE,CACnBpB,gBAAgB,CAAC,CACfgB,IAAI,gCAAAC,MAAA,CAAiCG,KAAK,CAACC,OAAO,CAAE,CACpDF,IAAI,CAAE,OACR,CAAC,CAAC,CACFvB,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CACD2B,QAAQ,CAAC,CAAC,CACV,MAAO,IAAM,CACX,GAAI,MAAO,CAAAD,WAAW,GAAK,UAAU,CAAE,CACrCA,WAAW,CAAC,CAAC,CACf,CACF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CACN;AACAtE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqF,aAAa,CAAG,CAAApD,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEqD,GAAG,IAAIvD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEuD,GAAG,EAEpD,GAAI,CAACD,aAAa,CAAE,CAClBnC,YAAY,CAAC,CAAEC,kBAAkB,CAAE,CAAC,CAAEC,iBAAiB,CAAE,CAAE,CAAC,CAAC,CAC7D,OACF,CAEA,KAAM,CAAAmC,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF;AACA,KAAM,CAAAC,SAAS,CAAGnF,UAAU,CAACF,EAAE,CAAE,QAAQ,CAAC,CAC1C,KAAM,CAAAsF,CAAC,CAAGnF,KAAK,CAACkF,SAAS,CAAEjF,KAAK,CAAC,QAAQ,CAAE,IAAI,CAAE8E,aAAa,CAAC,CAAC,CAChE,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAlF,OAAO,CAACiF,CAAC,CAAC,CACjC,KAAM,CAAAtC,kBAAkB,CAAGuC,QAAQ,CAACC,IAAI,CAACC,MAAM,CAAC,CAACC,GAAG,CAAEC,GAAG,GAAKD,GAAG,EAAIC,GAAG,CAACC,IAAI,CAAC,CAAC,CAACC,KAAK,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAC/F;AACA,KAAM,CAAAC,YAAY,CAAGxF,GAAG,CAACL,UAAU,cAAA6D,MAAA,CAAeoB,aAAa,CAAE,CAAC,CAClE3E,OAAO,CAACuF,YAAY,CAAGP,QAAQ,EAAK,CAClC,KAAM,CAAAK,IAAI,CAAGL,QAAQ,CAACQ,GAAG,CAAC,CAAC,CAC3B,KAAM,CAAA9C,iBAAiB,CAAG,CAAA2C,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE3C,iBAAiB,GAAI,CAAC,CACtDF,YAAY,CAAC,CAAEC,kBAAkB,CAAEC,iBAAkB,CAAC,CAAC,CACzD,CAAC,CAAC,CACJ,CAAE,MAAOgB,KAAK,CAAE,CAChB,CACF,CAAC,CACDmB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACxD,IAAI,CAAEE,YAAY,CAAC,CAAC,CACxB,KAAM,CAAAkE,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAArF,kBAAkB,CAAC,CAAC,CACzCqF,QAAQ,CAACC,mBAAmB,CAAC,CAAEC,MAAM,CAAE,gBAAiB,CAAC,CAAC,CAC1D,KAAM,CAAAC,QAAQ,CAAG,2BAA2B,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,CACtE,GAAI,CACF,KAAM,CAAAzF,cAAc,CAACf,IAAI,CAAEgB,uBAAuB,CAAC,CACnD8B,gBAAgB,CAAC,CAAEgB,IAAI,CAAE,yBAAyB,CAAEG,IAAI,CAAE,MAAO,CAAC,CAAC,CACnE,GAAI,CACF,KAAM,CAAAvD,eAAe,CAACV,IAAI,CAAEkG,QAAQ,CAAC,CACvC,CAAE,MAAOO,UAAe,CAAE,CACxB,KAAM,CAAAC,cAAc,CAAG,CAAC,oBAAoB,CAAE,2BAA2B,CAAE,8BAA8B,CAAE,kDAAkD,CAAC,CAC9J,KAAM,CAAAC,wBAAwB,CAAGN,QAAQ,EAAIK,cAAc,CAACE,QAAQ,CAACH,UAAU,CAACI,IAAI,CAAC,CACrF,GAAI,CAACF,wBAAwB,CAAE,CAC7B,KAAM,CAAAF,UAAU,CAClB,CACA,KAAM,CAAA9F,kBAAkB,CAACX,IAAI,CAAEkG,QAAQ,CAAC,CAC1C,CACF,CAAE,MAAOhC,KAAU,CAAE,CACnBpB,gBAAgB,CAAC,CACfgB,IAAI,CAAEI,KAAK,CAAC2C,IAAI,GAAK,0BAA0B,CAC3C,oGAAoG,oBAAA9C,MAAA,CACjFG,KAAK,CAACC,OAAO,CAAE,CACtCF,IAAI,CAAE,OACR,CAAC,CAAC,CACJ,CACF,CAAC,CACD,KAAM,CAAA6C,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAhG,OAAO,CAACd,IAAI,CAAC,CACnB8C,gBAAgB,CAAC,CAAEgB,IAAI,CAAE,0BAA0B,CAAEG,IAAI,CAAE,MAAO,CAAC,CAAC,CACtE,CAAE,MAAOC,KAAK,CAAE,CAChB,CACF,CAAC,CACD,KAAM,CAAA6C,cAAc,CAAGA,CAACC,MAAc,CAAEC,cAA0B,CAAEC,UAAkB,GAAK,CACzF9E,gBAAgB,CAAC4E,MAAM,CAAC,CACxB1E,wBAAwB,CAAC2E,cAAc,CAAC,CACxCzE,oBAAoB,CAAC0E,UAAU,CAAC,CAChChF,WAAW,CAAC,kBAAkB,CAAC,CACjC,CAAC,CACD,KAAM,CAAAiF,eAAe,CAAGA,CAAA,GAAM,CAC5B/E,gBAAgB,CAAC,IAAI,CAAC,CACtBF,WAAW,CAAC,mBAAmB,CAAC,CAClC,CAAC,CACD;AACAkB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEZ,WAAW,CAAE,kBAAkB,CAAEE,eAAe,CAAC,CAC5F,GAAIF,WAAW,EAAIE,eAAe,CAAE,CAClC,mBACElB,IAAA,QAAK2F,SAAS,CAAE7F,MAAM,CAAC8F,KAAM,CAAAC,QAAA,cAC3B3F,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAACgG,aAAc,CAAAD,QAAA,eACnC7F,IAAA,OAAI2F,SAAS,CAAE7F,MAAM,CAACiG,SAAU,CAAAF,QAAA,CAAC,0BAAc,CAAI,CAAC,cACpD7F,IAAA,MAAA6F,QAAA,CAAG,YAAU,CAAG,CAAC,EACd,CAAC,CACH,CAAC,CAEV,CAEA;AACA,KAAM,CAAAG,UAAU,CAAG1F,YAAY,GAAKF,IAAI,CAAG,CACzCuD,GAAG,CAAEvD,IAAI,CAACuD,GAAG,CACbpB,WAAW,CAAEnC,IAAI,CAACmC,WAAW,CAC7B0D,QAAQ,CAAE7F,IAAI,CAAC6F,QAAQ,CACvBC,QAAQ,CAAE,KACZ,CAAC,CAAG,IAAI,CAAC,CAET;AACA,GAAI1F,QAAQ,GAAK,MAAM,CAAE,CACvB,mBACER,IAAA,QAAK2F,SAAS,CAAE7F,MAAM,CAAC8F,KAAM,CAAAC,QAAA,cAC3B3F,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAACgG,aAAc,CAAAD,QAAA,eACnC7F,IAAA,OAAI2F,SAAS,CAAE7F,MAAM,CAACiG,SAAU,CAAAF,QAAA,CAAC,0BAAc,CAAI,CAAC,cACpD7F,IAAA,MAAG2F,SAAS,CAAE7F,MAAM,CAACqG,QAAS,CAAAN,QAAA,CAAC,4CAA0C,CAAG,CAAC,cAC7E3F,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAACsG,WAAY,CAAAP,QAAA,EAChCG,UAAU,cACT9F,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAACuG,WAAY,CAAAR,QAAA,eACjC7F,IAAA,QAAKsG,GAAG,CAAEN,UAAU,CAACC,QAAQ,EAAI,EAAG,CAACM,GAAG,CAAC,QAAQ,CAACZ,SAAS,CAAE7F,MAAM,CAAC0G,UAAW,CAAE,CAAC,cAClFtG,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAAC2G,QAAS,CAAAZ,QAAA,eAC9B3F,KAAA,SAAMyF,SAAS,CAAE7F,MAAM,CAAC4G,QAAS,CAAAb,QAAA,EAAC,WAAS,CAACG,UAAU,CAACzD,WAAW,CAAC,GAAC,EAAM,CAAC,cAC3ErC,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAAC6G,UAAW,CAAAd,QAAA,eAChC3F,KAAA,SAAMyF,SAAS,CAAE7F,MAAM,CAAC8G,WAAY,CAAAf,QAAA,EAAC,uBACxB,CAACvE,SAAS,CAACE,kBAAkB,CAAC,MAC3C,EAAM,CAAC,cACPtB,KAAA,SAAMyF,SAAS,CAAE7F,MAAM,CAAC8G,WAAY,CAAAf,QAAA,EAAC,sBACzB,CAACvE,SAAS,CAACG,iBAAiB,CAAC,MACzC,EAAM,CAAC,EACJ,CAAC,EACH,CAAC,CACL,CAAC9B,qBAAqB,CAAC,CAAC,eACvBK,IAAA,WAAQ6G,OAAO,CAAExB,aAAc,CAACM,SAAS,CAAE7F,MAAM,CAACgH,UAAW,CAAAjB,QAAA,CAAC,UAAQ,CAAQ,CAC/E,EACE,CAAC,CAEN,CAAClG,qBAAqB,CAAC,CAAC,eACtBO,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAACiH,SAAU,CAAAlB,QAAA,eAC/B7F,IAAA,MAAA6F,QAAA,CAAG,yDAA6C,CAAG,CAAC,cACpD7F,IAAA,WAAQ6G,OAAO,CAAErC,gBAAiB,CAACmB,SAAS,CAAE7F,MAAM,CAACkH,SAAU,CAAAnB,QAAA,CAAC,qBAEhE,CAAQ,CAAC,EACN,CAER,CACAzE,aAAa,eACZpB,IAAA,QACE2F,SAAS,IAAArD,MAAA,CAAKxC,MAAM,CAACsB,aAAa,MAAAkB,MAAA,CAChClB,aAAa,CAACoB,IAAI,GAAK,SAAS,CAC5B1C,MAAM,CAACmH,aAAa,CACpB7F,aAAa,CAACoB,IAAI,GAAK,OAAO,CAC9B1C,MAAM,CAACoH,WAAW,CAClBpH,MAAM,CAACqH,UAAU,CACpB,CAAAtB,QAAA,CAEFzE,aAAa,CAACiB,IAAI,CAChB,CACN,EACE,CAAC,cACNnC,KAAA,QAAKyF,SAAS,CAAE7F,MAAM,CAACsH,aAAc,CAAAvB,QAAA,eACnC3F,KAAA,WACE2G,OAAO,CAAEA,CAAA,GAAMpG,WAAW,CAAC,cAAc,CAAE,CAC3CkF,SAAS,CAAE7F,MAAM,CAACuH,OAAQ,CAAAxB,QAAA,eAE1B7F,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAACwH,QAAS,CAAAzB,QAAA,CAAC,cAAE,CAAM,CAAC,cAC3C7F,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAACyH,SAAU,CAAA1B,QAAA,CAAC,eAAa,CAAM,CAAC,cACvD7F,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAAC0H,QAAS,CAAA3B,QAAA,CAAC,mCAAiC,CAAM,CAAC,EACpE,CAAC,cACT3F,KAAA,WACE2G,OAAO,CAAEA,CAAA,GAAM,CACb,GAAI,CAACb,UAAU,CAAE,CACf3E,gBAAgB,CAAC,CAAEgB,IAAI,CAAE,qCAAqC,CAAEG,IAAI,CAAE,MAAO,CAAC,CAAC,CAC/E,OACF,CACA/B,WAAW,CAAC,mBAAmB,CAAC,CAClC,CAAE,CACFkF,SAAS,CAAE7F,MAAM,CAACuH,OAAQ,CAAAxB,QAAA,eAE1B7F,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAACwH,QAAS,CAAAzB,QAAA,CAAC,cAAE,CAAM,CAAC,cAC3C7F,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAACyH,SAAU,CAAA1B,QAAA,CAAC,aAAW,CAAM,CAAC,cACrD7F,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAAC0H,QAAS,CAAA3B,QAAA,CAAC,mCAAiC,CAAM,CAAC,CACzE,CAACG,UAAU,EAAI,CAACrG,qBAAqB,CAAC,CAAC,eAAIK,IAAA,SAAM2F,SAAS,CAAE7F,MAAM,CAAC2H,YAAa,CAAA5B,QAAA,CAAC,kBAAgB,CAAM,CAAC,EACnG,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CACA;AACA,GAAIrF,QAAQ,GAAK,mBAAmB,EAAIwF,UAAU,CAAE,CAClD;AACA,KAAM,CAAA0B,UAAU,CAAGtH,IAAI,EAAI,CACzBuD,GAAG,CAAEqC,UAAU,CAACrC,GAAG,CACnBpB,WAAW,CAAEyD,UAAU,CAACzD,WAAW,CACnCe,KAAK,CAAE,IAAI,CACX2C,QAAQ,CAAED,UAAU,CAACC,QAAQ,CAC7B0B,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,KAAK,CAClBC,QAAQ,CAAE,CAAC,CAAC,CACZC,YAAY,CAAE,EAAE,CAChBC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,KAAAA,CAAA,GAAY,CAAC,CAAC,CACtBC,UAAU,CAAE,KAAAA,CAAA,GAAY,EAAE,CAC1BC,gBAAgB,CAAE,KAAAA,CAAA,IAAa,CAAC,CAAC,CAAQ,CACzCC,MAAM,CAAE,KAAAA,CAAA,GAAY,CAAC,CAAC,CACtBC,MAAM,CAAEA,CAAA,IAAO,CAAC,CAAC,CAAC,CAClBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAE,cACd,CAAQ,CAER,mBACEvI,IAAA,QAAK2F,SAAS,CAAE7F,MAAM,CAAC8F,KAAM,CAAAC,QAAA,cAC3B7F,IAAA,CAACP,gBAAgB,EACfW,IAAI,CAAEsH,UAAW,CACjBc,UAAU,CAAElD,cAAe,CAC3BmD,oBAAoB,CAAEA,CAAA,GAAMhI,WAAW,CAAC,MAAM,CAAE,CACjD,CAAC,CACC,CAAC,CAEV,CACA;AACA,GAAID,QAAQ,GAAK,kBAAkB,EAAIwF,UAAU,EAAItF,aAAa,CAAE,CAClE;AACA,KAAM,CAAAgH,UAAU,CAAGtH,IAAI,EAAI,CACzBuD,GAAG,CAAEqC,UAAU,CAACrC,GAAG,CACnBpB,WAAW,CAAEyD,UAAU,CAACzD,WAAW,CACnCe,KAAK,CAAE,IAAI,CACX2C,QAAQ,CAAED,UAAU,CAACC,QAAQ,CAC7B0B,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,KAAK,CAClBC,QAAQ,CAAE,CAAC,CAAC,CACZC,YAAY,CAAE,EAAE,CAChBC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,KAAAA,CAAA,GAAY,CAAC,CAAC,CACtBC,UAAU,CAAE,KAAAA,CAAA,GAAY,EAAE,CAC1BC,gBAAgB,CAAE,KAAAA,CAAA,IAAa,CAAC,CAAC,CAAQ,CACzCC,MAAM,CAAE,KAAAA,CAAA,GAAY,CAAC,CAAC,CACtBC,MAAM,CAAEA,CAAA,IAAO,CAAC,CAAC,CAAC,CAClBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAE,cACd,CAAQ,CAER,mBACEvI,IAAA,QAAK2F,SAAS,CAAE7F,MAAM,CAAC8F,KAAM,CAAAC,QAAA,cAC3B7F,IAAA,CAACN,eAAe,EACd6F,MAAM,CAAE7E,aAAc,CACtBN,IAAI,CAAEsH,UAAW,CACjBgB,UAAU,CAAE9H,qBAAsB,CAClC+H,MAAM,CAAE7H,iBAAkB,CAC1B8H,WAAW,CAAElD,eAAgB,CAC7BmD,YAAY,CAAEA,CAAA,GAAMpI,WAAW,CAAC,MAAM,CAAE,CACzC,CAAC,CACC,CAAC,CAEV,CACA;AACA,KAAM,CAAAiH,UAAU,CAAGtH,IAAI,GAAK4F,UAAU,CAAG,CACvCrC,GAAG,CAAEqC,UAAU,CAACrC,GAAG,CACnBpB,WAAW,CAAEyD,UAAU,CAACzD,WAAW,CACnCe,KAAK,CAAE,IAAI,CACX2C,QAAQ,CAAED,UAAU,CAACC,QAAQ,CAC7B0B,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,KAAK,CAClBC,QAAQ,CAAE,CAAC,CAAC,CACZC,YAAY,CAAE,EAAE,CAChBC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,KAAAA,CAAA,GAAY,CAAC,CAAC,CACtBC,UAAU,CAAE,KAAAA,CAAA,GAAY,EAAE,CAC1BC,gBAAgB,CAAE,KAAAA,CAAA,IAAa,CAAC,CAAC,CAAQ,CACzCC,MAAM,CAAE,KAAAA,CAAA,GAAY,CAAC,CAAC,CACtBC,MAAM,CAAEA,CAAA,IAAO,CAAC,CAAC,CAAC,CAClBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAEvC,UAAU,CAACE,QAAQ,GAAK,UAAU,CAAG,cAAc,CAAG,YACpE,CAAC,CAAU,IAAI,CAAC,CAEhB,mBACElG,IAAA,CAACR,gBAAgB,EACfY,IAAI,CAAEsH,UAAW,CACjBmB,YAAY,CAAEA,CAAA,GAAMpI,WAAW,CAAC,MAAM,CAAE,CACxCqI,kBAAkB,CAAEtE,gBAAiB,CACrCuE,SAAS,CAAE1D,aAAc,CAC1B,CAAC,CAEN,CACA,cAAe,CAAAlF,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}